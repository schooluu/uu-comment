{"version":3,"file":"add.js","sources":["pages/wx/home/add.vue","../../soft/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd3gvaG9tZS9hZGQudnVl"],"sourcesContent":["<template>\r\n  <view class=\"publish-container\">\r\n    <!-- 顶部渐变导航栏 -->\r\n    <view class=\"nav-bar gradient-bar\">\r\n      <view class=\"nav-left\">\r\n        <text class=\"cancel\" @tap=\"handleCancel\">\r\n          <text class=\"cancel-icon\">✕</text>\r\n          取消\r\n        </text>\r\n      </view>\r\n      <view class=\"nav-center\">\r\n        <text class=\"nav-title\">发布动态</text>\r\n      </view>\r\n      <view class=\"nav-right\">\r\n        <text class=\"publish\" :class=\"{ active: canPublish }\" @tap=\"handlePublish\">\r\n          发表\r\n        </text>\r\n      </view>\r\n    </view>\r\n    <!-- 内容输入区 -->\r\n    <view class=\"content-area\">\r\n      <view class=\"input-header\">\r\n        <text class=\"input-label\">分享你的想法</text>\r\n        <text class=\"char-count\">{{ content.length }}/1000</text>\r\n      </view>\r\n      <textarea class=\"content-input\" v-model=\"content\" placeholder=\"这一刻的想法...支持表情😊\"\r\n        placeholder-style=\"color: #a0aec0;\" maxlength=\"1000\" auto-height />\r\n      <view class=\"input-footer\">\r\n        <view class=\"emoji-toolbar\">\r\n          <text class=\"emoji-btn\" @tap=\"toggleEmojiPanel\">\r\n            <text class=\"emoji-icon\">😊</text>\r\n            表情\r\n          </text>\r\n        </view>\r\n        <view class=\"input-actions\">\r\n          <text class=\"word-count\" :class=\"{ warning: content.length > 800 }\">\r\n            {{ content.length }}\r\n          </text>\r\n        </view>\r\n      </view>\r\n      <view class=\"emoji-panel\" v-if=\"showEmojiPanel\">\r\n        <view class=\"emoji-header\">\r\n          <text class=\"emoji-title\">选择表情</text>\r\n          <text class=\"emoji-close\" @tap=\"toggleEmojiPanel\">✕</text>\r\n        </view>\r\n        <scroll-view scroll-x class=\"emoji-list\">\r\n          <text v-for=\"(emoji, i) in emojiList\" :key=\"i\" class=\"emoji-item\" @tap=\"insertEmoji(emoji)\">{{ emoji }}</text>\r\n        </scroll-view>\r\n      </view>\r\n    </view>\r\n    <!-- 图片/视频展示区 -->\r\n    <view class=\"media-area\" v-if=\"mediaList.length > 0 || true\">\r\n      <view class=\"media-header\">\r\n        <text class=\"media-title\">照片</text>\r\n        <text class=\"media-count\">{{ mediaList.length }}/9</text>\r\n      </view>\r\n      <view class=\"media-grid\">\r\n        <view v-for=\"(item, index) in mediaList\" :key=\"index\" class=\"media-item\">\r\n          <view class=\"media-wrapper\">\r\n            <image v-if=\"item.type === 'image'\" :src=\"item.url\" mode=\"aspectFill\" class=\"media-img\"\r\n              @tap=\"previewImage(index)\" />\r\n            <view v-else-if=\"item.type === 'video'\" class=\"video-preview-wrap\">\r\n              <video :src=\"item.url\" class=\"video-preview\" />\r\n              <view class=\"video-overlay\">\r\n                <text class=\"video-play-icon\">▶</text>\r\n                <text class=\"video-duration\">00:30</text>\r\n              </view>\r\n            </view>\r\n            <view class=\"media-actions\">\r\n              <text class=\"delete-btn\" @tap=\"deleteMedia(index)\">✕</text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <!-- 添加按钮 -->\r\n        <view class=\"add-btn\" @tap=\"chooseMedia\" v-if=\"mediaList.length < 9\">\r\n          <view class=\"add-icon\">+</view>\r\n          <text class=\"add-text\">添加</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <!-- 底部选项区 -->\r\n    <view class=\"bottom-options\">\r\n      <view class=\"options-header\">\r\n        <text class=\"options-title\">发布设置</text>\r\n      </view>\r\n      <!-- <view class=\"option-item\" @tap=\"togglePrivacy\">\r\n        <view class=\"option-left\">\r\n          <text class=\"option-icon\">👁️</text>\r\n          <text class=\"option-label\">谁可以看</text>\r\n        </view>\r\n        <view class=\"option-right\">\r\n          <text class=\"option-value\">{{ privacyText }}</text>\r\n          <text class=\"option-arrow\">›</text>\r\n        </view>\r\n      </view> -->\r\n      <!-- <view class=\"option-item\" @tap=\"toggleLocation\">\r\n        <view class=\"option-left\">\r\n          <text class=\"option-icon\">📍</text>\r\n          <text class=\"option-label\">所在位置</text>\r\n        </view>\r\n        <view class=\"option-right\">\r\n          <text class=\"option-value\">{{ location || '添加位置' }}</text>\r\n          <text class=\"option-arrow\">›</text>\r\n        </view>\r\n      </view> -->\r\n      <!-- <view class=\"option-item\">\r\n        <view class=\"option-left\">\r\n          <text class=\"option-icon\">@</text>\r\n          <text class=\"option-label\">提醒谁看</text>\r\n        </view>\r\n        <view class=\"option-right\">\r\n          <text class=\"option-value\">{{ mentionList.length ? `已选${mentionList.length}人` : '添加' }}</text>\r\n          <text class=\"option-arrow\">›</text>\r\n        </view>\r\n      </view> -->\r\n    </view>\r\n    <!-- 联系方式编辑面板 -->\r\n    <view v-if=\"showContactPanel\" class=\"contact-panel\">\r\n      <view class=\"cp-row\">\r\n        <text class=\"cp-label\">方式</text>\r\n        <view class=\"cp-types\">\r\n          <text :class=\"['cp-type', contactType === 'wechat' ? 'active' : '']\" @tap=\"setContactType('wechat')\">微信</text>\r\n          <text :class=\"['cp-type', contactType === 'phone' ? 'active' : '']\" @tap=\"setContactType('phone')\">手机</text>\r\n          <text :class=\"['cp-type', contactType === 'qq' ? 'active' : '']\" @tap=\"setContactType('qq')\">QQ</text>\r\n          <text :class=\"['cp-type', contactType === 'email' ? 'active' : '']\" @tap=\"setContactType('email')\">邮箱</text>\r\n        </view>\r\n      </view>\r\n      <view class=\"cp-row\">\r\n        <text class=\"cp-label\">号码/账号</text>\r\n        <input class=\"cp-input\" v-model=\"contactValue\" :placeholder=\"contactPlaceholder\" />\r\n      </view>\r\n      <view class=\"cp-actions\">\r\n        <text class=\"cp-btn ghost\" @tap=\"clearContact\">清空</text>\r\n        <text class=\"cp-btn primary\" @tap=\"saveContact\">完成</text>\r\n      </view>\r\n    </view>\r\n    <!-- 科技感加载动画 -->\r\n    <view class=\"tech-loading\" v-if=\"loading\">\r\n      <view class=\"dot\" v-for=\"i in 4\" :key=\"i\"></view>\r\n      <text class=\"loading-text\">发布中...</text>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\n\r\n// 表单数据\r\nconst content = ref('')\r\nconst mediaList = ref([])\r\nconst location = ref('')\r\nconst privacyMode = ref('public')\r\nconst mentionList = ref([])\r\nconst loading = ref(false)\r\n\r\n// 计算属性\r\nconst privacyText = computed(() => {\r\n  const modes = {\r\n    public: '公开',\r\n    friends: '仅好友可见',\r\n    private: '仅自己可见'\r\n  }\r\n  return modes[privacyMode.value]\r\n})\r\n\r\nconst canPublish = computed(() => {\r\n  return content.value.trim() || mediaList.value.length > 0\r\n})\r\n\r\n// 匿名头像\r\nconst anonymousAvatar = 'https://img1.imgtp.com/2023/07/10/0Qv6Qw4w.png'\r\n// 表情列表\r\nconst emojiList = [\r\n  '😊', '😂', '🤣', '❤️', '😍', '🤔', '😒', '👍', '👎',\r\n  '😳', '🥺', '😭', '😘', '🤗', '🙄', '😴', '🤮', '🤧',\r\n  '😷', '🤒', '🤕', '😈', '👻', '👽', '🤖', '💩', '😺',\r\n  '💪', '👊', '✌️', '🤞', '🙏', '👏', '🙌', '👐', '🤲'\r\n]\r\nconst showEmojiPanel = ref(false)\r\nconst insertEmoji = (emoji) => {\r\n  content.value += emoji\r\n}\r\nconst toggleEmojiPanel = () => {\r\n  showEmojiPanel.value = !showEmojiPanel.value\r\n}\r\n\r\n// 方法\r\nconst handleCancel = () => {\r\n  uni.navigateBack()\r\n}\r\n\r\nconst handlePublish = async () => {\r\n  if (!canPublish.value) return\r\n\r\n  loading.value = true\r\n  try {\r\n    uni.showLoading({\r\n      title: '发布中...'\r\n    })\r\n\r\n    const { result } = await uniCloud.callFunction({\r\n      name: 'wx_add_moment',\r\n      data: {\r\n        content: content.value,\r\n        mediaList: mediaList.value,\r\n        location: location.value,\r\n        privacy: privacyMode.value,\r\n        contactType: contactType.value,\r\n        contactValue: contactValue.value\r\n      }\r\n    })\r\n\r\n    if (result.code === 0) {\r\n      uni.showToast({\r\n        title: '发布成功',\r\n        icon: 'success'\r\n      })\r\n      // 返回上一页并刷新列表\r\n      uni.$emit('refreshMoments')\r\n      setTimeout(() => {\r\n        uni.navigateBack()\r\n      }, 1500)\r\n    } else {\r\n      throw new Error(result.msg)\r\n    }\r\n  } catch (error) {\r\n    uni.showToast({\r\n      title: error.message || '发布失败',\r\n      icon: 'none'\r\n    })\r\n  } finally {\r\n    uni.hideLoading()\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 云函数 URL 化地址（需要在 uniCloud 控制台开启并获取）\r\n// 格式：https://fc-xxx.service.tcloudbase.com/wx_upload\r\nconst CLOUD_FUNCTION_URL = 'http://117.72.208.124:40027/api/v1/upload'\r\n\r\nconst uploadImages = async (tempFilePaths) => {\r\n  console.log('uploadImages', tempFilePaths[0])\r\n  try {\r\n    const tasks = tempFilePaths.map(path => {\r\n      return new Promise((resolve, reject) => {\r\n        // 直接使用 uni.uploadFile 上传到云函数（无需 base64 转换）\r\n        uni.uploadFile({\r\n          url: CLOUD_FUNCTION_URL,\r\n          filePath: path,\r\n          name: 'file',\r\n          formData: {\r\n            // 可以添加额外参数\r\n          },\r\n          success: (uploadRes) => {\r\n            try {\r\n              const data = JSON.parse(uploadRes.data)\r\n              if (data.status) {\r\n                resolve({\r\n                  type: 'image',\r\n                  url: data.data.links.url,\r\n                  key: data.data.key,\r\n                  thumbnail_url: data.data.links.thumbnail_url\r\n                })\r\n              } else {\r\n                reject(new Error(data.message || '上传失败'))\r\n              }\r\n            } catch (e) {\r\n              reject(new Error('解析上传结果失败'))\r\n            }\r\n          },\r\n          fail: (err) => {\r\n            console.error('上传失败:', err)\r\n            reject(err)\r\n          }\r\n        })\r\n      })\r\n    })\r\n\r\n    const results = await Promise.all(tasks)\r\n    return results\r\n  } catch (error) {\r\n    console.error(error)\r\n    uni.showToast({\r\n      title: error.message || '图片上传失败',\r\n      icon: 'none'\r\n    })\r\n    return []\r\n  }\r\n}\r\n\r\nconst chooseMedia = () => {\r\n  // 从相册选择\r\n  uni.chooseImage({\r\n    count: 9 - mediaList.value.length,\r\n    success: async (res) => {\r\n      uni.showLoading({\r\n        title: '上传中...'\r\n      })\r\n      try {\r\n        const newMedia = await uploadImages(res.tempFilePaths)\r\n        mediaList.value.push(...newMedia)\r\n      } finally {\r\n        uni.hideLoading()\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nconst deleteMedia = (index) => {\r\n  mediaList.value.splice(index, 1)\r\n}\r\n\r\nconst previewImage = (index) => {\r\n  const urls = mediaList.value\r\n    .filter(item => item.type === 'image')\r\n    .map(item => item.url)\r\n  uni.previewImage({\r\n    urls,\r\n    current: urls[index]\r\n  })\r\n}\r\n\r\nconst togglePrivacy = () => {\r\n  uni.showActionSheet({\r\n    itemList: ['公开', '仅好友可见', '仅自己可见'],\r\n    success: (res) => {\r\n      const modes = ['public', 'friends', 'private']\r\n      privacyMode.value = modes[res.tapIndex]\r\n    }\r\n  })\r\n}\r\n\r\nconst toggleLocation = () => {\r\n  // 获取位置信息\r\n  uni.chooseLocation({\r\n    success: (res) => {\r\n      location.value = res.name\r\n    }\r\n  })\r\n}\r\n\r\n// 联系方式\r\nconst showContactPanel = ref(false)\r\nconst contactType = ref('wechat')\r\nconst contactValue = ref('')\r\nconst contactMap = {\r\n  wechat: '请输入微信号',\r\n  phone: '请输入手机号',\r\n  qq: '请输入QQ号',\r\n  email: '请输入邮箱'\r\n}\r\nconst contactPlaceholder = computed(() => contactMap[contactType.value])\r\nconst contactText = computed(() => {\r\n  if (!contactValue.value) return '未填写'\r\n  const label = { wechat: '微信', phone: '手机', qq: 'QQ', email: '邮箱' }[contactType.value]\r\n  return `${label}: ${contactValue.value}`\r\n})\r\nconst toggleContactPanel = () => { showContactPanel.value = !showContactPanel.value }\r\nconst setContactType = (t) => { contactType.value = t }\r\nconst saveContact = () => { showContactPanel.value = false }\r\nconst clearContact = () => { contactValue.value = '' }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// 设计系统变量\r\n$primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n$secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\r\n$success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);\r\n$card-radius: 24rpx;\r\n$button-radius: 32rpx;\r\n$shadow-light: 0 4rpx 20rpx rgba(102, 126, 234, 0.15);\r\n$shadow-medium: 0 8rpx 32rpx rgba(102, 126, 234, 0.2);\r\n$shadow-heavy: 0 12rpx 48rpx rgba(102, 126, 234, 0.25);\r\n$background-color: #f8fafc;\r\n$surface-color: #ffffff;\r\n$text-primary: #1a202c;\r\n$text-secondary: #4a5568;\r\n$text-muted: #718096;\r\n$border-color: #e2e8f0;\r\n$action-color: #667eea;\r\n$success-color: #48bb78;\r\n$warning-color: #ed8936;\r\n$error-color: #f56565;\r\n\r\n// 间距系统\r\n$space-xs: 8rpx;\r\n$space-sm: 16rpx;\r\n$space-md: 24rpx;\r\n$space-lg: 32rpx;\r\n$space-xl: 48rpx;\r\n$space-2xl: 64rpx;\r\n\r\n// 字体系统\r\n$font-xs: 24rpx;\r\n$font-sm: 28rpx;\r\n$font-base: 32rpx;\r\n$font-lg: 36rpx;\r\n$font-xl: 40rpx;\r\n$font-2xl: 48rpx;\r\n\r\n// 动画系统\r\n$transition-fast: 0.15s ease-out;\r\n$transition-base: 0.2s ease-out;\r\n$transition-slow: 0.3s ease-out;\r\n$bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);\r\n$smooth: cubic-bezier(0.4, 0, 0.2, 1);\r\n\r\n.publish-container {\r\n  min-height: 100vh;\r\n  background: $background-color;\r\n  animation: slideUp $transition-slow $smooth;\r\n  position: relative;\r\n\r\n  &::before {\r\n    content: '';\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 200rpx;\r\n    background: $primary-gradient;\r\n    opacity: 0.05;\r\n    z-index: 0;\r\n  }\r\n}\r\n\r\n.gradient-bar {\r\n  background: $primary-gradient;\r\n  color: #fff;\r\n  box-shadow: $shadow-light;\r\n  backdrop-filter: blur(20rpx);\r\n  -webkit-backdrop-filter: blur(20rpx);\r\n}\r\n\r\n.nav-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: $space-md $space-lg;\r\n  position: relative;\r\n  z-index: 10;\r\n\r\n  .nav-left,\r\n  .nav-center,\r\n  .nav-right {\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  .nav-center {\r\n    justify-content: center;\r\n  }\r\n\r\n  .nav-right {\r\n    justify-content: flex-end;\r\n  }\r\n\r\n  .nav-title {\r\n    font-size: $font-lg;\r\n    color: rgba(255, 255, 255, 0.95);\r\n    font-weight: 600;\r\n    letter-spacing: 1rpx;\r\n  }\r\n\r\n  .cancel {\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: $font-sm;\r\n    color: rgba(255, 255, 255, 0.9);\r\n    font-weight: 500;\r\n    padding: $space-xs $space-sm;\r\n    background: rgba(255, 255, 255, 0.1);\r\n    border-radius: $button-radius;\r\n    transition: all $transition-base;\r\n    backdrop-filter: blur(10rpx);\r\n\r\n    .cancel-icon {\r\n      margin-right: $space-xs;\r\n      font-size: $font-sm;\r\n    }\r\n\r\n    &:active {\r\n      background: rgba(255, 255, 255, 0.2);\r\n      transform: scale(0.95);\r\n    }\r\n  }\r\n\r\n  .publish {\r\n    position: relative;\r\n    font-size: $font-base;\r\n    font-weight: 600;\r\n    color: rgba(255, 255, 255, 0.7);\r\n    background: rgba(255, 255, 255, 0.1);\r\n    border-radius: $button-radius;\r\n    padding: $space-sm $space-lg;\r\n    letter-spacing: 1rpx;\r\n    transition: all $transition-base;\r\n    backdrop-filter: blur(10rpx);\r\n    border: 1rpx solid rgba(255, 255, 255, 0.2);\r\n\r\n    &.active {\r\n      color: #fff;\r\n      background: $success-gradient;\r\n      box-shadow: $shadow-medium;\r\n      border-color: transparent;\r\n      transform: translateY(-1rpx);\r\n    }\r\n\r\n    &:active {\r\n      transform: scale(0.95);\r\n    }\r\n  }\r\n}\r\n\r\n@keyframes slideDown {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-20rpx);\r\n  }\r\n\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n.anon-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 32rpx 0 0 32rpx;\r\n\r\n  .anon-avatar {\r\n    width: 80rpx;\r\n    height: 80rpx;\r\n    border-radius: 50%;\r\n    box-shadow: 0 0 16rpx #5A8FFF, 0 0 32rpx #7F5AFF;\r\n    background: #fff;\r\n    border: 2rpx solid #fff;\r\n  }\r\n\r\n  .anon-nickname {\r\n    margin-left: 24rpx;\r\n    font-size: 32rpx;\r\n    color: #5A8FFF;\r\n    font-weight: 600;\r\n    letter-spacing: 2rpx;\r\n  }\r\n}\r\n\r\n.content-area {\r\n  margin: $space-lg;\r\n  background: $surface-color;\r\n  border-radius: $card-radius;\r\n  box-shadow: $shadow-light;\r\n  padding: 0;\r\n  position: relative;\r\n  border: 1rpx solid $border-color;\r\n  transition: all $transition-base;\r\n  overflow: hidden;\r\n\r\n  &:focus-within {\r\n    box-shadow: $shadow-medium;\r\n    border-color: $action-color;\r\n    transform: translateY(-2rpx);\r\n  }\r\n\r\n  .input-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: $space-md $space-lg $space-sm;\r\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n    border-bottom: 1rpx solid $border-color;\r\n\r\n    .input-label {\r\n      font-size: $font-sm;\r\n      color: $text-secondary;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .char-count {\r\n      font-size: $font-xs;\r\n      color: $text-muted;\r\n\r\n      &.warning {\r\n        color: $warning-color;\r\n      }\r\n    }\r\n  }\r\n\r\n  .content-input {\r\n    width: 100%;\r\n    min-height: 200rpx;\r\n    font-size: $font-base;\r\n    color: $text-primary;\r\n    background: transparent;\r\n    border: none;\r\n    outline: none;\r\n    resize: none;\r\n    padding: $space-lg;\r\n    line-height: 1.6;\r\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;\r\n  }\r\n\r\n  .input-footer {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: $space-sm $space-lg;\r\n    background: #fafbfc;\r\n    border-top: 1rpx solid $border-color;\r\n\r\n    .input-actions {\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .word-count {\r\n        font-size: $font-xs;\r\n        color: $text-muted;\r\n        padding: $space-xs $space-sm;\r\n        background: rgba(102, 126, 234, 0.1);\r\n        border-radius: 12rpx;\r\n\r\n        &.warning {\r\n          background: rgba(237, 137, 54, 0.1);\r\n          color: $warning-color;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .emoji-toolbar {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .emoji-btn {\r\n      display: flex;\r\n      align-items: center;\r\n      font-size: $font-sm;\r\n      color: $action-color;\r\n      padding: $space-xs $space-sm;\r\n      border-radius: 16rpx;\r\n      background: rgba(102, 126, 234, 0.1);\r\n      transition: all $transition-fast;\r\n\r\n      .emoji-icon {\r\n        margin-right: $space-xs;\r\n        font-size: $font-base;\r\n      }\r\n\r\n      &:active {\r\n        background: rgba(102, 126, 234, 0.2);\r\n        transform: scale(0.95);\r\n      }\r\n    }\r\n  }\r\n\r\n  .emoji-panel {\r\n    background: $surface-color;\r\n    border-top: 1rpx solid $border-color;\r\n    animation: slideDown $transition-base $smooth;\r\n\r\n    .emoji-header {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      padding: $space-md $space-lg;\r\n      background: #fafbfc;\r\n      border-bottom: 1rpx solid $border-color;\r\n\r\n      .emoji-title {\r\n        font-size: $font-sm;\r\n        color: $text-secondary;\r\n        font-weight: 600;\r\n      }\r\n\r\n      .emoji-close {\r\n        font-size: $font-base;\r\n        color: $text-muted;\r\n        padding: $space-xs;\r\n        border-radius: 50%;\r\n        transition: all $transition-fast;\r\n\r\n        &:active {\r\n          background: rgba(0, 0, 0, 0.1);\r\n          transform: scale(0.9);\r\n        }\r\n      }\r\n    }\r\n\r\n    .emoji-list {\r\n      height: 300rpx;\r\n      padding: $space-md;\r\n\r\n      .emoji-item {\r\n        display: inline-block;\r\n        font-size: $font-xl;\r\n        padding: $space-sm;\r\n        margin: $space-xs;\r\n        border-radius: 12rpx;\r\n        transition: all $transition-fast;\r\n\r\n        &:active {\r\n          background: rgba(102, 126, 234, 0.15);\r\n          transform: scale(0.9);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.media-area {\r\n  margin: $space-lg;\r\n\r\n  .media-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: $space-md;\r\n\r\n    .media-title {\r\n      font-size: $font-base;\r\n      color: $text-secondary;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .media-count {\r\n      font-size: $font-xs;\r\n      color: $text-muted;\r\n      padding: $space-xs $space-sm;\r\n      background: rgba(102, 126, 234, 0.1);\r\n      border-radius: 12rpx;\r\n    }\r\n  }\r\n\r\n  .media-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(3, 1fr);\r\n    gap: $space-sm;\r\n\r\n    .media-item {\r\n      position: relative;\r\n\r\n      .media-wrapper {\r\n        position: relative;\r\n        border-radius: $card-radius;\r\n        overflow: hidden;\r\n        transition: all $transition-base;\r\n\r\n        &:active {\r\n          transform: scale(0.95);\r\n        }\r\n      }\r\n\r\n      .media-img {\r\n        width: 100%;\r\n        height: 200rpx;\r\n        object-fit: cover;\r\n        transition: all $transition-base;\r\n      }\r\n\r\n      .video-preview-wrap {\r\n        position: relative;\r\n\r\n        .video-preview {\r\n          width: 100%;\r\n          height: 180rpx;\r\n          border-radius: 16rpx;\r\n          object-fit: cover;\r\n        }\r\n\r\n        .video-play-icon {\r\n          position: absolute;\r\n          left: 50%;\r\n          top: 50%;\r\n          transform: translate(-50%, -50%);\r\n          font-size: 48rpx;\r\n          color: #fff;\r\n          text-shadow: 0 2rpx 8rpx #5A8FFF;\r\n          pointer-events: none;\r\n        }\r\n      }\r\n\r\n      .video-overlay {\r\n        position: absolute;\r\n        inset: 0;\r\n        background: rgba(0, 0, 0, 0.3);\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n\r\n        .video-play-icon {\r\n          font-size: $font-2xl;\r\n          color: #fff;\r\n          margin-bottom: $space-sm;\r\n        }\r\n\r\n        .video-duration {\r\n          font-size: $font-xs;\r\n          color: #fff;\r\n          background: rgba(0, 0, 0, 0.5);\r\n          padding: $space-xs $space-sm;\r\n          border-radius: 8rpx;\r\n        }\r\n      }\r\n\r\n      .media-actions {\r\n        position: absolute;\r\n        top: $space-xs;\r\n        right: $space-xs;\r\n\r\n        .delete-btn {\r\n          width: 40rpx;\r\n          height: 40rpx;\r\n          background: rgba(0, 0, 0, 0.7);\r\n          color: #fff;\r\n          border-radius: 50%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-size: $font-sm;\r\n          font-weight: bold;\r\n          backdrop-filter: blur(10rpx);\r\n          transition: all $transition-base;\r\n\r\n          &:active {\r\n            background: $error-color;\r\n            transform: scale(0.9);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .add-btn {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 100%;\r\n      height: 200rpx;\r\n      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n      border-radius: $card-radius;\r\n      border: 2rpx dashed $border-color;\r\n      transition: all $transition-base;\r\n      position: relative;\r\n      overflow: hidden;\r\n\r\n      .add-icon {\r\n        font-size: $font-2xl;\r\n        color: $action-color;\r\n        margin-bottom: $space-xs;\r\n        font-weight: 300;\r\n      }\r\n\r\n      .add-text {\r\n        font-size: $font-xs;\r\n        color: $text-muted;\r\n        font-weight: 500;\r\n      }\r\n\r\n      &:active {\r\n        transform: scale(0.95);\r\n        border-color: $action-color;\r\n        background: rgba(102, 126, 234, 0.05);\r\n\r\n        .add-icon {\r\n          color: darken($action-color, 10%);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.bottom-options {\r\n  margin: $space-lg;\r\n  background: $surface-color;\r\n  border-radius: $card-radius;\r\n  box-shadow: $shadow-light;\r\n  border: 1rpx solid $border-color;\r\n  overflow: hidden;\r\n\r\n  .options-header {\r\n    padding: $space-md $space-lg;\r\n    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\r\n    border-bottom: 1rpx solid $border-color;\r\n\r\n    .options-title {\r\n      font-size: $font-base;\r\n      color: $text-secondary;\r\n      font-weight: 600;\r\n    }\r\n  }\r\n\r\n  .option-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: $space-lg;\r\n    border-bottom: 1rpx solid $border-color;\r\n    transition: all $transition-base;\r\n    position: relative;\r\n\r\n    &:last-child {\r\n      border-bottom: none;\r\n    }\r\n\r\n    &::before {\r\n      content: '';\r\n      position: absolute;\r\n      left: 0;\r\n      top: 0;\r\n      width: 4rpx;\r\n      height: 100%;\r\n      background: $primary-gradient;\r\n      transform: scaleY(0);\r\n      transition: transform $transition-base;\r\n    }\r\n\r\n    &:active {\r\n      background: rgba(102, 126, 234, 0.05);\r\n\r\n      &::before {\r\n        transform: scaleY(1);\r\n      }\r\n    }\r\n\r\n    .option-left {\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .option-icon {\r\n        font-size: $font-base;\r\n        margin-right: $space-sm;\r\n        width: 32rpx;\r\n        text-align: center;\r\n      }\r\n\r\n      .option-label {\r\n        font-size: $font-sm;\r\n        color: $text-secondary;\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .option-right {\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .option-value {\r\n        color: $action-color;\r\n        font-weight: 600;\r\n        font-size: $font-sm;\r\n        margin-right: $space-xs;\r\n      }\r\n\r\n      .option-arrow {\r\n        font-size: $font-lg;\r\n        color: $text-muted;\r\n        transform: rotate(0deg);\r\n        transition: transform $transition-base;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.contact-panel {\r\n  margin: $space-lg;\r\n  padding: $space-lg;\r\n  background: $surface-color;\r\n  border-radius: $card-radius;\r\n  border: 1rpx solid $border-color;\r\n  box-shadow: $shadow-light;\r\n\r\n  .cp-row {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: $space-md;\r\n  }\r\n\r\n  .cp-label {\r\n    width: 140rpx;\r\n    font-size: $font-sm;\r\n    color: $text-secondary;\r\n  }\r\n\r\n  .cp-types {\r\n    display: flex;\r\n    gap: $space-sm;\r\n    flex-wrap: wrap;\r\n  }\r\n\r\n  .cp-type {\r\n    padding: 8rpx 16rpx;\r\n    border-radius: 999rpx;\r\n    font-size: $font-sm;\r\n    color: $action-color;\r\n    background: rgba(102, 126, 234, 0.08);\r\n    border: 1rpx solid rgba(102, 126, 234, 0.2);\r\n  }\r\n\r\n  .cp-type.active {\r\n    background: $success-gradient;\r\n    color: #fff;\r\n    border-color: transparent;\r\n  }\r\n\r\n  .cp-input {\r\n    flex: 1;\r\n    height: 72rpx;\r\n    background: #fff;\r\n    border: 1rpx solid $border-color;\r\n    border-radius: 12rpx;\r\n    padding: 0 $space-md;\r\n    font-size: $font-sm;\r\n  }\r\n\r\n  .cp-actions {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: $space-sm;\r\n    margin-top: $space-sm;\r\n  }\r\n\r\n  .cp-btn {\r\n    padding: 10rpx 22rpx;\r\n    border-radius: 999rpx;\r\n    font-size: $font-sm;\r\n  }\r\n\r\n  .cp-btn.ghost {\r\n    color: $text-secondary;\r\n    background: #f3f6fb;\r\n    border: 1rpx solid $border-color;\r\n  }\r\n\r\n  .cp-btn.primary {\r\n    color: #fff;\r\n    background: $primary-gradient;\r\n    box-shadow: $shadow-light;\r\n  }\r\n}\r\n\r\n.tech-loading {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  z-index: 9999;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  padding: $space-2xl;\r\n  border-radius: $card-radius;\r\n  backdrop-filter: blur(20rpx);\r\n  box-shadow: $shadow-heavy;\r\n  border: 1rpx solid rgba(255, 255, 255, 0.8);\r\n\r\n  .dot {\r\n    width: 16rpx;\r\n    height: 16rpx;\r\n    background: $primary-gradient;\r\n    border-radius: 50%;\r\n    margin: 0 $space-xs;\r\n    animation: techDot 1.2s infinite ease-in-out;\r\n    display: inline-block;\r\n\r\n    &:nth-child(1) {\r\n      animation-delay: 0s;\r\n    }\r\n\r\n    &:nth-child(2) {\r\n      animation-delay: 0.15s;\r\n    }\r\n\r\n    &:nth-child(3) {\r\n      animation-delay: 0.3s;\r\n    }\r\n\r\n    &:nth-child(4) {\r\n      animation-delay: 0.45s;\r\n    }\r\n  }\r\n\r\n  .loading-text {\r\n    margin-top: $space-lg;\r\n    font-size: $font-sm;\r\n    color: $text-secondary;\r\n    letter-spacing: 1rpx;\r\n    font-weight: 500;\r\n    animation: textPulse 2s ease-in-out infinite;\r\n  }\r\n}\r\n\r\n@keyframes techDot {\r\n\r\n  0%,\r\n  80%,\r\n  100% {\r\n    opacity: 0.3;\r\n    transform: scale(0.8);\r\n  }\r\n\r\n  40% {\r\n    opacity: 1;\r\n    transform: scale(1.2);\r\n  }\r\n}\r\n\r\n@keyframes textPulse {\r\n\r\n  0%,\r\n  100% {\r\n    opacity: 0.7;\r\n    transform: scale(1);\r\n  }\r\n\r\n  50% {\r\n    opacity: 1;\r\n    transform: scale(1.02);\r\n  }\r\n}\r\n\r\n@keyframes slideUp {\r\n  from {\r\n    transform: translateY(40rpx);\r\n    opacity: 0;\r\n  }\r\n\r\n  to {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n// 响应式设计\r\n@media screen and (max-width: 750rpx) {\r\n  .media-grid {\r\n    grid-template-columns: repeat(2, 1fr) !important;\r\n    gap: $space-sm !important;\r\n  }\r\n\r\n  .content-area,\r\n  .media-area,\r\n  .bottom-options {\r\n    margin: $space-md !important;\r\n  }\r\n\r\n  .nav-bar {\r\n    padding: $space-sm $space-md !important;\r\n  }\r\n\r\n  .nav-title {\r\n    font-size: $font-base !important;\r\n  }\r\n}\r\n\r\n// 暗色模式支持\r\n@media (prefers-color-scheme: dark) {\r\n  .publish-container {\r\n    background: #0f172a;\r\n\r\n    &::before {\r\n      opacity: 0.1;\r\n    }\r\n  }\r\n\r\n  .content-area {\r\n    background: #1e293b;\r\n    border-color: #334155;\r\n    color: #f1f5f9;\r\n  }\r\n\r\n  .bottom-options .option-item {\r\n    background: #1e293b;\r\n    border-color: #334155;\r\n    color: #cbd5e1;\r\n  }\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/WORKPLACE/uu-company/pages/wx/home/add.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","uniCloud"],"mappings":"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"}