{"version":3,"file":"detail.js","sources":["pages/city/chat/detail.vue","../../soft/HBuilderX.4.45.2025010502/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2l0eS9jaGF0L2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"chat-container\">\r\n    <!-- È°∂ÈÉ®‰ø°ÊÅØ -->\r\n    <view class=\"header\">\r\n      <text class=\"title\">{{ chatInfo.name }}</text>\r\n    </view>\r\n    \r\n    <!-- ËÅäÂ§©ËÆ∞ÂΩïÂå∫ -->\r\n    <scroll-view \r\n      class=\"message-list\" \r\n      scroll-y \r\n      :scroll-into-view=\"lastMessageId\"\r\n      @scrolltoupper=\"loadMoreMessages\">\r\n      <view \r\n        v-for=\"(message, index) in messages\" \r\n        :key=\"index\"\r\n        :id=\"'msg-' + message.id\"\r\n        :class=\"['message-item', message.isSelf ? 'self' : 'other']\">\r\n        <image \r\n          class=\"avatar\" \r\n          :src=\"message.avatar\">\r\n        </image>\r\n        <view class=\"message-content\">\r\n          <text class=\"time\" v-if=\"showMessageTime(index)\">\r\n            {{ formatTime(message.time) }}\r\n          </text>\r\n          <view class=\"bubble\">\r\n            <text>{{ message.content }}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </scroll-view>\r\n    \r\n    <!-- ËæìÂÖ•Âå∫Âüü -->\r\n    <view class=\"input-area\">\r\n      <view class=\"input-box\">\r\n        <input \r\n          type=\"text\" \r\n          v-model=\"inputMessage\"\r\n          placeholder=\"ËØ∑ËæìÂÖ•Ê∂àÊÅØ\"\r\n          @confirm=\"sendMessage\"\r\n        />\r\n      </view>\r\n      <view class=\"tools\">\r\n        <text class=\"emoji-btn\">üòä</text>\r\n        <text class=\"image-btn\">üñºÔ∏è</text>\r\n      </view>\r\n      <button \r\n        class=\"send-btn\"\r\n        :class=\"{ active: inputMessage }\"\r\n        @tap=\"sendMessage\">\r\n        ÂèëÈÄÅ\r\n      </button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed } from 'vue'\r\n\r\nconst chatInfo = {\r\n  name: 'Âº†‰∏â',\r\n  avatar: 'https://example.com/avatar.jpg'\r\n}\r\n\r\nconst messages = ref([\r\n  {\r\n    id: 1,\r\n    content: '‰Ω†Â•ΩÔºåËØ∑ÈóÆËøô‰∏™ÂïÜÂìÅËøòÂú®ÂêóÔºü',\r\n    time: '2024-01-20 10:30:00',\r\n    isSelf: false,\r\n    avatar: 'https://example.com/avatar1.jpg'\r\n  },\r\n  {\r\n    id: 2,\r\n    content: 'Âú®ÁöÑÔºåÊÇ®ÊÉ≥‰∫ÜËß£‰ªÄ‰πàÔºü',\r\n    time: '2024-01-20 10:31:00',\r\n    isSelf: true,\r\n    avatar: 'https://example.com/avatar2.jpg'\r\n  }\r\n])\r\n\r\nconst inputMessage = ref('')\r\nconst lastMessageId = computed(() => {\r\n  const lastMsg = messages.value[messages.value.length - 1]\r\n  return lastMsg ? 'msg-' + lastMsg.id : ''\r\n})\r\n\r\nconst showMessageTime = (index) => {\r\n  if (index === 0) return true\r\n  const currentMsg = messages.value[index]\r\n  const prevMsg = messages.value[index - 1]\r\n  return dayjs(currentMsg.time).diff(dayjs(prevMsg.time), 'minute') > 5\r\n}\r\n\r\nconst formatTime = (time) => {\r\n  return dayjs(time).format('MM-DD HH:mm')\r\n}\r\n\r\nconst sendMessage = () => {\r\n  if (!inputMessage.value.trim()) return\r\n  \r\n  messages.value.push({\r\n    id: messages.value.length + 1,\r\n    content: inputMessage.value,\r\n    time: dayjs().format('YYYY-MM-DD HH:mm:ss'),\r\n    isSelf: true,\r\n    avatar: 'https://example.com/avatar2.jpg'\r\n  })\r\n  \r\n  inputMessage.value = ''\r\n}\r\n\r\nconst loadMoreMessages = () => {\r\n  // Âä†ËΩΩÊõ¥Â§öÂéÜÂè≤Ê∂àÊÅØÁöÑÈÄªËæë\r\n  console.log('Âä†ËΩΩÊõ¥Â§öÊ∂àÊÅØ')\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chat-container {\r\n  min-height: 100vh;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  flex-direction: column;\r\n  \r\n  .header {\r\n    height: 88rpx;\r\n    background: #fff;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 30rpx;\r\n    box-shadow: 0 2rpx 4rpx rgba(0,0,0,0.1);\r\n    \r\n    .title {\r\n      font-size: 32rpx;\r\n      font-weight: 500;\r\n      color: #333;\r\n    }\r\n  }\r\n  \r\n  .message-list {\r\n    flex: 1;\r\n    padding: 20rpx;\r\n    \r\n    .message-item {\r\n      display: flex;\r\n      margin-bottom: 30rpx;\r\n      \r\n      .avatar {\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n        border-radius: 40rpx;\r\n      }\r\n      \r\n      .message-content {\r\n        max-width: 60%;\r\n        margin: 0 20rpx;\r\n        \r\n        .time {\r\n          font-size: 24rpx;\r\n          color: #999;\r\n          text-align: center;\r\n          margin-bottom: 10rpx;\r\n        }\r\n        \r\n        .bubble {\r\n          padding: 20rpx;\r\n          border-radius: 8rpx;\r\n          font-size: 28rpx;\r\n          word-break: break-all;\r\n        }\r\n      }\r\n      \r\n      &.other {\r\n        .bubble {\r\n          background: #fff;\r\n          color: #333;\r\n        }\r\n      }\r\n      \r\n      &.self {\r\n        flex-direction: row-reverse;\r\n        \r\n        .bubble {\r\n          background: #07c160;\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  .input-area {\r\n    background: #fff;\r\n    padding: 20rpx;\r\n    display: flex;\r\n    align-items: center;\r\n    border-top: 1rpx solid #eee;\r\n    \r\n    .input-box {\r\n      flex: 1;\r\n      background: #f5f5f5;\r\n      border-radius: 8rpx;\r\n      padding: 0 20rpx;\r\n      \r\n      input {\r\n        height: 72rpx;\r\n        font-size: 28rpx;\r\n      }\r\n    }\r\n    \r\n    .tools {\r\n      display: flex;\r\n      padding: 0 20rpx;\r\n      \r\n      .emoji-btn, .image-btn {\r\n        font-size: 48rpx;\r\n        margin-left: 20rpx;\r\n      }\r\n    }\r\n    \r\n    .send-btn {\r\n      width: 120rpx;\r\n      height: 72rpx;\r\n      background: #ddd;\r\n      color: #fff;\r\n      border-radius: 8rpx;\r\n      font-size: 28rpx;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      margin-left: 20rpx;\r\n      \r\n      &.active {\r\n        background: #07c160;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style> ","import MiniProgramPage from 'D:/WORKPLACE/uu-company/pages/city/chat/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni"],"mappings":";;;;;AA4DA,UAAM,WAAW;AAAA,MACf,MAAM;AAAA,MACN,QAAQ;AAAA,IACV;AAEA,UAAM,WAAWA,cAAAA,IAAI;AAAA,MACnB;AAAA,QACE,IAAI;AAAA,QACJ,SAAS;AAAA,QACT,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,QAAQ;AAAA,MACT;AAAA,MACD;AAAA,QACE,IAAI;AAAA,QACJ,SAAS;AAAA,QACT,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,QAAQ;AAAA,MACT;AAAA,IACH,CAAC;AAED,UAAM,eAAeA,cAAG,IAAC,EAAE;AAC3B,UAAM,gBAAgBC,cAAQ,SAAC,MAAM;AACnC,YAAM,UAAU,SAAS,MAAM,SAAS,MAAM,SAAS,CAAC;AACxD,aAAO,UAAU,SAAS,QAAQ,KAAK;AAAA,IACzC,CAAC;AAED,UAAM,kBAAkB,CAAC,UAAU;AACjC,UAAI,UAAU;AAAG,eAAO;AACxB,YAAM,aAAa,SAAS,MAAM,KAAK;AACvC,YAAM,UAAU,SAAS,MAAM,QAAQ,CAAC;AACxC,aAAO,MAAM,WAAW,IAAI,EAAE,KAAK,MAAM,QAAQ,IAAI,GAAG,QAAQ,IAAI;AAAA,IACtE;AAEA,UAAM,aAAa,CAAC,SAAS;AAC3B,aAAO,MAAM,IAAI,EAAE,OAAO,aAAa;AAAA,IACzC;AAEA,UAAM,cAAc,MAAM;AACxB,UAAI,CAAC,aAAa,MAAM,KAAM;AAAE;AAEhC,eAAS,MAAM,KAAK;AAAA,QAClB,IAAI,SAAS,MAAM,SAAS;AAAA,QAC5B,SAAS,aAAa;AAAA,QACtB,MAAM,MAAK,EAAG,OAAO,qBAAqB;AAAA,QAC1C,QAAQ;AAAA,QACR,QAAQ;AAAA,MACZ,CAAG;AAED,mBAAa,QAAQ;AAAA,IACvB;AAEA,UAAM,mBAAmB,MAAM;AAE7BC,oBAAAA,MAAY,MAAA,OAAA,qCAAA,QAAQ;AAAA,IACtB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHA,GAAG,WAAW,eAAe;"}