import{r as a,c as e,a as s,w as t,i as l,b as u,d as n,f as o,t as r,g as c,h as i,n as d,j as m,F as f,l as v,m as p,S as _,I as g,C as h}from"./index-B1YqlGux.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=j({__name:"detail",setup(j){const b="张三",x=a([{id:1,content:"你好，请问这个商品还在吗？",time:"2024-01-20 10:30:00",isSelf:!1,avatar:"https://example.com/avatar1.jpg"},{id:2,content:"在的，您想了解什么？",time:"2024-01-20 10:31:00",isSelf:!0,avatar:"https://example.com/avatar2.jpg"}]),y=a(""),S=e((()=>{const a=x.value[x.value.length-1];return a?"msg-"+a.id:""})),D=a=>{if(0===a)return!0;const e=x.value[a],s=x.value[a-1];return dayjs(e.time).diff(dayjs(s.time),"minute")>5},H=()=>{y.value.trim()&&(x.value.push({id:x.value.length+1,content:y.value,time:dayjs().format("YYYY-MM-DD HH:mm:ss"),isSelf:!0,avatar:"https://example.com/avatar2.jpg"}),y.value="")},M=()=>{console.log("加载更多消息")};return(a,e)=>{const j=v,Y=l,k=p,w=_,C=g,V=h;return u(),s(Y,{class:"chat-container"},{default:t((()=>[n(Y,{class:"header"},{default:t((()=>[n(j,{class:"title"},{default:t((()=>[o(r(b),1)])),_:1})])),_:1}),n(w,{class:"message-list","scroll-y":"","scroll-into-view":S.value,onScrolltoupper:M},{default:t((()=>[(u(!0),c(f,null,i(x.value,((a,e)=>(u(),s(Y,{key:e,id:"msg-"+a.id,class:d(["message-item",a.isSelf?"self":"other"])},{default:t((()=>[n(k,{class:"avatar",src:a.avatar},null,8,["src"]),n(Y,{class:"message-content"},{default:t((()=>[D(e)?(u(),s(j,{key:0,class:"time"},{default:t((()=>{return[o(r((e=a.time,dayjs(e).format("MM-DD HH:mm"))),1)];var e})),_:2},1024)):m("",!0),n(Y,{class:"bubble"},{default:t((()=>[n(j,null,{default:t((()=>[o(r(a.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["id","class"])))),128))])),_:1},8,["scroll-into-view"]),n(Y,{class:"input-area"},{default:t((()=>[n(Y,{class:"input-box"},{default:t((()=>[n(C,{type:"text",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value=a),placeholder:"请输入消息",onConfirm:H},null,8,["modelValue"])])),_:1}),n(Y,{class:"tools"},{default:t((()=>[n(j,{class:"emoji-btn"},{default:t((()=>[o("😊")])),_:1}),n(j,{class:"image-btn"},{default:t((()=>[o("🖼️")])),_:1})])),_:1}),n(V,{class:d(["send-btn",{active:y.value}]),onClick:H},{default:t((()=>[o(" 发送 ")])),_:1},8,["class"])])),_:1})])),_:1})}}},[["__scopeId","data-v-fe2774d2"]]);export{b as default};
