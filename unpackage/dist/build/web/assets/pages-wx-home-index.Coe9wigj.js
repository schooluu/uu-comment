import{r as a,o as t,e,w as l,k as s,l as o,s as c,a4 as n,x as u,c as i,f as r,u as d,n as m,h as f,t as p,i as h,j as v,F as g,A as _,B as k,m as y,q as b,D as w,H as x,J as C,W as M,y as T,v as j,P as I,Q as q,U as F,I as L,z as S,S as E,L as U}from"./index-DUqm4Qcg.js";import{a as V,b as $,c as A,o as P,d as D}from"./uni-app.es.f-sBORdo.js";import{_ as J}from"./_plugin-vue_export-helper.BCo6x5W8.js";const Q=J({__name:"index",setup(J){const Q=["æ˜Ÿæ²³æ—…äºº","å¤æ—¥å¾®é£","è“è“æ±½æ°´","æ©™å­æ±½çƒ","å¤œç©ºå®ˆæœ›","æ™¨æ›¦å¾®å…‰","äº‘ç«¯æ¼«æ­¥","æœˆä¸‹ç‹¬è¡Œ","ç™½èŒ¶æ¸…æ¬¢","é’æŸ æ—¶å…‰","æ¸©æŸ”æ˜Ÿçƒ","æ™´ç©ºä¸‡é‡Œ","é£ä¸­è¯—äºº","æµ·ç›å†°æ²™","å±±é‡å¬é£","æ©˜å­æµ·å²¸","é“¶æ²³ä¿¡ä½¿","å¾®å…‰æ‹¾æ¢¦","æ™šé£é‚®å·®","é›¾é‡Œçœ‹èŠ±","æ£®æ—ä¹‹å¿ƒ","é›¨ååˆæ™´","äº‘æœµæ”¶é›†è€…","å¤å¤œè¤ç«"];function H(){return Q[Math.floor(Math.random()*Q.length)]}const N=["https://qcloud.dpfile.com/pc/pawK4KeJSDNVINhfwh9CoLJPFluB-tnHSd3heJ_jybtNIYslSlGEPeQVyA4hZRCP.jpg","https://images.unsplash.com/photo-1502685104226-ee32379fefbe?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1527980965255-d3b416303d12?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=256&q=60"],R=N[Math.floor(Math.random()*N.length)],z=["https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=1400&q=60","https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=crop&w=1400&q=60","https://images.unsplash.com/photo-1516822003754-cca485356ecb?auto=format&fit=crop&w=1400&q=60","https://images.unsplash.com/photo-1544006659-f0b21884ce1d?auto=format&fit=crop&w=1400&q=60","https://images.unsplash.com/photo-1542202229-7d93c33f5d07?auto=format&fit=crop&w=1400&q=60","https://images.unsplash.com/photo-1519345182560-3f2917c472ef?auto=format&fit=crop&w=1400&q=60","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=1400&q=60","https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=1400&q=60"],B=z[Math.floor(Math.random()*z.length)],K=R,Y=["ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ï¼","åŒ¿ååˆ†äº«ï¼Œè½»æ¾è‡ªåœ¨~","æ¯ä¸€å¤©éƒ½å€¼å¾—è®°å½•ã€‚","ç”¨å¿ƒæ„Ÿå—ç”Ÿæ´»çš„ç¾å¥½ã€‚","ç§‘æŠ€è®©åŒ¿åæ›´æ¸©æš–ã€‚","ä¸–ç•Œå¾ˆå¤§ï¼Œå¿ƒæƒ…å¾ˆç¾ã€‚","åšè‡ªå·±çš„å°å¤ªé˜³ â˜€ï¸","åŒ¿åä¸å­¤å•ï¼Œæ¸©æš–åœ¨èº«è¾¹ã€‚","è®°å½•æ­¤åˆ»ï¼Œé‡è§æ›´å¥½çš„è‡ªå·±ã€‚","ä¿æŒå¥½å¥‡ï¼Œä¿æŒçƒ­çˆ±ï¼"],G=Y[Math.floor(Math.random()*Y.length)],O=["åŒ¿åæ ‘æ´ Â· ç¾å¥½ç”Ÿæ´»","ç”¨æ¸©æŸ”æ²»æ„ˆä¸–ç•Œ","æ¯ä¸€å¤©éƒ½å€¼å¾—è®°å½•","è®©å¿ƒæƒ…è‡ªç”±æµåŠ¨","ç§‘æŠ€è®©æ¸©æš–å‘ç”Ÿ","åœ¨è¿™é‡Œé‡è§ç¾å¥½","åˆ†äº«ä½ çš„æ•…äº‹","åšè‡ªå·±çš„å°å¤ªé˜³","ä¸–ç•Œå¾ˆå¤§ï¼Œæ¸©æš–å¾ˆè¿‘","ç”¨åŒ¿åå®ˆæŠ¤çœŸå¿ƒ"];a(O[0]);const W=a(""),Z=a(!0);let X=null,aa=0,ta=0;function ea(){clearTimeout(X);const a=O[aa];W.value="",ta=0,function t(){ta<=a.length?(W.value=a.slice(0,ta),ta++,X=setTimeout(t,60)):setTimeout((()=>{aa=(aa+1)%O.length,ea()}),1800)}()}t((()=>{ea(),setInterval((()=>{Z.value=!Z.value}),500)}));const la=a(!1),sa=a(!1),oa=a(""),ca=a(-1),na=a({}),ua=a(1),ia=a(10),ra=a(!1),da=a(!0),ma=a([]),fa=async(a=!1)=>{if(!ra.value&&(da.value||a))try{ra.value=!0;const e=new Promise((a=>setTimeout(a,800))),[{result:l}]=await Promise.all([o.callFunction({name:"wx_get_list",data:{page:a?1:ua.value,pageSize:ia.value}}),e]);if(0!==l.code)throw new Error(l.msg);{const e=l.data.list.map((a=>({...a,username:H(),avatar:N[Math.floor(Math.random()*N.length)],comments:(a.comments||[]).map((a=>({...a,username:H(),avatar:N[Math.floor(Math.random()*N.length)]}))),likes:(a.likes||[]).map((()=>H()))})));if(a)ma.value=e,ua.value=2;else{const a=new Set((ma.value||[]).map((a=>a._id))),t=e.filter((t=>!a.has(t._id)));ma.value=[...ma.value||[],...t],ua.value++}da.value=l.data.hasMore;try{Ga()}catch(t){}}}catch(e){c({title:e.message||"è·å–æœ‹å‹åœˆå¤±è´¥",icon:"none"})}finally{ra.value=!1,a&&n()}};V((()=>{fa(!0),La(),Fa(),setTimeout((()=>{fa(!0)}),33e3),rt()})),$((()=>{La(),ct()})),A((()=>{La(),ct()})),P((()=>{!ra.value&&da.value&&fa()}));const pa=async()=>{if(oa.value.trim()){la.value=!1,sa.value=!1,c({title:"è¯„è®ºæˆåŠŸ",icon:"none"});try{const{result:a}=await o.callFunction({name:"wx_add_comment",data:{momentId:ma.value[ca.value]._id,content:oa.value}});if(0!==a.code)throw new Error(a.msg);{const a=ma.value[ca.value];a.comments||(a.comments=[]),a.comments.push({username:H(),content:oa.value,create_time:Date.now()}),oa.value=""}}catch(a){c({title:a.message||"è¯„è®ºå¤±è´¥",icon:"none"})}}},ha=async()=>{y({url:"/pages/wx/home/add"})},va=()=>{la.value=!1,sa.value=!1,oa.value="",ca.value=-1},ga=()=>{sa.value=!sa.value},_a=()=>{c({title:"è§†é¢‘åŠ è½½å¤±è´¥",icon:"none"})},ka=()=>{w({itemList:["åˆ‡æ¢ä¸»é¢˜","å†…å®¹åå¥½","å¸®åŠ©ä¸åé¦ˆ"],success:a=>{const t=a.tapIndex;0===t&&c({title:"å·²åˆ‡æ¢ä¸»é¢˜",icon:"none"}),1===t&&c({title:"åå¥½è®¾ç½®æš‚æœªå¼€æ”¾",icon:"none"}),2===t&&c({title:"æ„Ÿè°¢ä½ çš„åé¦ˆ",icon:"none"})}})},ya=a(0);D((a=>{const t=a.scrollTop||0;ya.value=Math.min(30,.2*t)}));const ba=a("theme-day"),wa=()=>{const a=(new Date).getHours();ba.value=a>=6&&a<11?"theme-morning":a>=11&&a<18?"theme-day":"theme-night"};t((()=>{wa(),setInterval(wa,6e5)}));const xa=a(!1),Ca=a([]);let Ma=0;const Ta=a=>{const t=Ca.value.findIndex((t=>t.id===a));-1!==t&&Ca.value.splice(t,1)},ja=(a=4,t=1e3)=>{xa.value=!0;const e=Math.max(1,a),l=Math.floor(t/e);for(let s=0;s<e;s++){setTimeout((()=>{const a=Ma++;Ca.value.push({id:a,x:Math.floor(10+80*Math.random()),y:Math.floor(18+54*Math.random()),theme:["t-blue","t-violet","t-gold","t-mint","t-pink"][Math.floor(5*Math.random())]}),setTimeout((()=>{Ta(a),0===Ca.value.length&&(xa.value=!1)}),2200)}),s*l)}},Ia=async a=>{try{const t=ma.value[a];na.value[a]=!0;const{result:e}=await o.callFunction({name:"wx_add_toggle_like",data:{momentId:t._id}});if(0!==e.code)throw new Error(e.msg);t.isLiked=e.data.isLiked,t.isLiked?(t.likes||(t.likes=[]),t.likes.push(H())):t.likes.pop(),setTimeout((()=>{na.value[a]=!1}),1e3)}catch(t){c({title:t.message||"æ“ä½œå¤±è´¥",icon:"none"})}};let qa=null;const Fa=()=>{qa||(xa.value=!0,qa=setInterval((()=>{const a=3+Math.floor(3*Math.random()),t=1e3+Math.floor(600*Math.random());ja(a,t)}),1500+Math.floor(900*Math.random())))},La=()=>{clearInterval(qa),qa=null,xa.value=!1,Ca.value=[]},Sa=a=>a||0===a?a>=1e4?(a/1e4).toFixed(1).replace(/\.0$/,"")+"w":a>=1e3?(a/1e3).toFixed(1).replace(/\.0$/,"")+"k":String(a):"0",Ea=a=>{const t=a.likes&&a.likes.length||0,e=a.comments&&a.comments.length||0,l="video"===a.mediaType;return Math.floor(3*t+5*e+(l?18:8))};a("recommend");const Ua=a({}),Va=a([{tag:"# ç²¾é€‰",title:"ä»Šæ—¥çƒ­èŠï¼šåŒ¿åä¹Ÿè¦æœ‰æ€åº¦",sub:"æ¥ä¸€æ¡èµ°å¿ƒçš„åˆ†äº«å§"},{tag:"# æ–°é²œ",title:"ä½ çš„å°ç¡®å¹¸ï¼Œå€¼å¾—è¢«çœ‹åˆ°",sub:"è®°å½•å½“ä¸‹ï¼Œæ¸©æš–ä¸€æ•´å¤©"},{tag:"# é™„è¿‘",title:"å‘ç°èº«è¾¹çš„ç¾å¥½ç¬é—´",sub:"åŒåŸçƒ­ç‚¹ï¼Œé©¬ä¸ŠåŠ å…¥"}]),$a=a=>{const t=Object.keys(a||{}).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(null==a[t]?"":a[t]))).join("&");y({url:"/pages/wx/photos/add"+(t?"?"+t:"")})},Aa=()=>{Za.value=!1,Xa.value=null,at.value=0,tt.value="",et.value=-1},Pa=async()=>{if(0!==at.value)try{x({title:"æäº¤ä¸­..."});const{result:a}=await o.callFunction({name:"wx_add_rating",data:{momentId:Xa.value._id,rating:at.value,comment:tt.value,ratingType:Xa.value.ratingType}});if(0!==a.code)throw new Error(a.msg);c({title:"è¯„åˆ†æˆåŠŸ",icon:"success"}),ma.value[et.value].ratingStats||(ma.value[et.value].ratingStats={average:0,count:0}),Aa()}catch(a){c({title:a.message||"è¯„åˆ†å¤±è´¥",icon:"none"})}finally{C()}else c({title:"è¯·é€‰æ‹©è¯„åˆ†",icon:"none"})},Da=a([{text:"# ä»Šå¤©ä½ åŒ¿åè¡¨ç™½äº†å—",views:"12.3w",posts:"2.1k",emoji:"ğŸ’Œ",badge:"çƒ­è®®",badgeType:"badge-hot",cta:"å‚ä¸"},{text:"# åŸå¸‚æ ‘æ´ï¼šä½ çš„å°çƒ¦æ¼",views:"8.7w",posts:"1.2k",emoji:"ğŸŒ†",badge:"åŒåŸ",badgeType:"badge-near",cta:"å»çœ‹çœ‹",mood:"æ°›å›´å¾ˆæš–"},{text:"# ä¸‰ä»¶è®©ä½ å¿«ä¹çš„å°äº‹",views:"6.5w",posts:"980",emoji:"âœ¨",badge:"ç²¾é€‰",badgeType:"badge-new",cta:"æˆ‘ä¹Ÿåˆ†äº«"}]),Ja=a=>{$a({text:a.text,views:a.views,posts:a.posts,emoji:a.emoji,badge:a.badge,badgeType:a.badgeType})},Qa=a(!1);let Ha=null;const Na=[];let Ra=Math.floor(Math.random()*Na.length);const za=()=>Na[Ra%Na.length],Ba=()=>"undefined"==typeof Audio?null:(Ha||(Ha=new Audio(za()),Ha.loop=!0,Ha.preload="auto",Ha.volume=.6,Ha.onerror=()=>{try{const a=(Ra=(Ra+1)%Na.length,za());Ha.src=a,Qa.value&&Ha.play().catch((()=>{Qa.value=!1,c({title:"èƒŒæ™¯éŸ³ä¹éœ€æ‰‹åŠ¨æ’­æ”¾",icon:"none"})}))}catch(a){}}),Ha),Ka=["today vibes","mood on","little joy","city walk","coffee oâ€™clock","soft light","daily look","slow life"],Ya=a([]),Ga=()=>{const a=(()=>{const a=[];return(ma.value||[]).forEach((t=>{"image"===t.mediaType&&Array.isArray(t.mediaUrls)&&t.mediaUrls.forEach((t=>{t&&a.push({url:t})})),Array.isArray(t.mediaList)&&t.mediaList.filter((a=>a&&"image"===a.type&&a.url)).forEach((t=>a.push({url:t.url})))})),a})();if(!a.length)return void(Ya.value=[]);const t=a.sort((()=>Math.random()-.5)).slice(0,8);Ya.value=t.map((a=>({...a,likes:Math.floor(100+9e3*Math.random()),emoji:["ğŸ’–","ğŸŒ¸","ğŸ“¸","ğŸ˜Š","â˜•","ğŸ‘—","ğŸ§‹","âœ¨"][Math.floor(8*Math.random())],caption:Ka[Math.floor(Math.random()*Ka.length)]})))},Oa=()=>{Ga()},Wa=a=>({beauty:"é¢œå€¼è¯„åˆ†",style:"ç©¿æ­è¯„åˆ†",photo:"ç…§ç‰‡è¯„åˆ†"}[a]||"è¯„åˆ†"),Za=a(!1),Xa=a(null),at=a(0),tt=a(""),et=a(-1);V((()=>{setTimeout((()=>Ga()),400),st()})),$((()=>{ot()})),A((()=>{ot()}));let lt=null;const st=()=>{lt||(lt=setInterval((()=>{Ga()}),5e3))},ot=()=>{lt&&(clearInterval(lt),lt=null)},ct=()=>{if(Ha)try{Ha.pause()}catch(a){}Qa.value=!1},nt=()=>{const a=Ba();a&&(Qa.value?ct():a.play().then((()=>{Qa.value=!0})).catch((()=>{c({title:"éœ€æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾",icon:"none"})})))};let ut=!1;const it=()=>{rt()},rt=()=>{const a=Ba();a&&(a.muted=!0,a.volume=0,a.play().then((()=>{Qa.value=!0,a.muted=!1,((a=.6,t=1200)=>{const e=Ha;if(!e)return;const l=e.volume||0,s=Math.max(1,Math.floor(t/80));let o=0;const c=setInterval((()=>{o++,e.volume=l+o/s*(a-l),o>=s&&clearInterval(c)}),80)})(.6,1200),"undefined"!=typeof document&&(["touchstart","click","wheel","keydown"].forEach((a=>{try{document.removeEventListener(a,it)}catch(t){}})),ut=!1)})).catch((()=>{"undefined"==typeof document||ut||(["touchstart","click","wheel","keydown"].forEach((a=>{try{document.addEventListener(a,it,{once:!0,passive:!0})}catch(t){}})),ut=!0)})))},dt=["ğŸ˜Š","ğŸ˜‚","ğŸ¤£","â¤ï¸","ğŸ˜","ğŸ¤”","ğŸ˜’","ğŸ‘","ğŸ‘","ğŸ˜³","ğŸ¥º","ğŸ˜­","ğŸ˜˜","ğŸ¤—","ğŸ™„","ğŸ˜´","ğŸ¤®","ğŸ¤§","ğŸ˜·","ğŸ¤’","ğŸ¤•","ğŸ˜ˆ","ğŸ‘»","ğŸ‘½","ğŸ¤–","ğŸ’©","ğŸ˜º","ğŸ’ª","ğŸ‘Š","âœŒï¸","ğŸ¤","ğŸ™","ğŸ‘","ğŸ™Œ","ğŸ‘","ğŸ¤²"];return(a,t)=>{const o=T,n=u,y=j,x=I,C=q,V=F,$=L,A=S,P=E,D=U;return i(),e(n,{class:s(["moments-container",ba.value])},{default:l((()=>[r(n,{class:"header"},{default:l((()=>[r(o,{class:"bg-image",src:d(B),mode:"aspectFill",style:m({transform:`translateY(${ya.value}px) scale(1.06)`})},null,8,["src","style"]),r(n,{class:"header-gradient"}),r(n,{class:"header-blur"}),r(n,{class:"header-glow"}),r(n,{class:"header-topbar"},{default:l((()=>[r(y,{class:"brand"},{default:l((()=>[f("åŒ¿ååœˆ")])),_:1}),r(n,{class:"top-actions"},{default:l((()=>[r(y,{class:"top-icon",onClick:ka},{default:l((()=>[f("â‹¯")])),_:1})])),_:1})])),_:1}),r(n,{class:"hero-card"},{default:l((()=>[r(o,{class:"hero-avatar",src:d(K),mode:"aspectFill"},null,8,["src"]),r(n,{class:"hero-text"},{default:l((()=>[r(y,{class:"hero-title"},{default:l((()=>[f(p(d(G)),1)])),_:1}),r(y,{class:"hero-sub"},{default:l((()=>[f("åŒ¿å Â· æ¸©æš– Â· çœŸå®")])),_:1}),r(n,{class:"hero-chips"},{default:l((()=>[r(y,{class:"chip active"},{default:l((()=>[f("æ¨è")])),_:1}),r(y,{class:"chip"},{default:l((()=>[f("å…³æ³¨")])),_:1}),r(y,{class:"chip"},{default:l((()=>[f("é™„è¿‘")])),_:1})])),_:1})])),_:1}),r(n,{class:"hero-cta",onClick:ha},{default:l((()=>[r(o,{class:"cta-icon",src:"https://img.icons8.com/fluency/48/plus.png",mode:"aspectFit"})])),_:1})])),_:1})])),_:1}),Ya.value.length?(i(),e(n,{key:0,class:"photo-showcase"},{default:l((()=>[r(n,{class:"ps-header"},{default:l((()=>[r(y,{class:"ps-title"},{default:l((()=>[f("æœ€ç¾ç…§ç‰‡")])),_:1}),r(y,{class:"ps-action",onClick:Oa},{default:l((()=>[f("æ¢ä¸€æ¢")])),_:1})])),_:1}),r(n,{class:"ps-row"},{default:l((()=>[(i(!0),h(g,null,v(Ya.value,((a,t)=>(i(),e(n,{class:"ps-item",key:t,onClick:a=>(a=>{const t=Ya.value.map((a=>a.url));b({urls:t,current:t[a]})})(t)},{default:l((()=>[r(o,{class:"ps-img",src:a.url,mode:"aspectFill"},null,8,["src"]),r(n,{class:"ps-overlay"},{default:l((()=>[r(n,{class:"ps-cap"},{default:l((()=>[r(y,{class:"ps-emoji"},{default:l((()=>[f(p(a.emoji),1)])),_:2},1024),r(y,{class:"ps-text"},{default:l((()=>[f(p(a.caption),1)])),_:2},1024)])),_:2},1024),r(y,{class:"ps-like"},{default:l((()=>[f("â¤ "+p(Sa(a.likes)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):_("",!0),r(n,{class:"banner-topics"},{default:l((()=>[r(C,{class:"banner-swiper",circular:"",autoplay:"",interval:"4000"},{default:l((()=>[(i(!0),h(g,null,v(Va.value,((a,t)=>(i(),e(x,{key:t},{default:l((()=>[r(n,{class:"topic-card",onClick:t=>(a=>{$a({tag:a.tag,title:a.title,sub:a.sub})})(a)},{default:l((()=>[r(n,{class:"topic-tag"},{default:l((()=>[f(p(a.tag),1)])),_:2},1024),r(y,{class:"topic-title"},{default:l((()=>[f(p(a.title),1)])),_:2},1024),r(y,{class:"topic-sub"},{default:l((()=>[f(p(a.sub),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1}),r(n,{class:"hot-board"},{default:l((()=>[r(n,{class:"hot-title"},{default:l((()=>[f("ä»Šæ—¥çƒ­æ¦œ")])),_:1}),r(n,{class:"hot-list"},{default:l((()=>[(i(!0),h(g,null,v(Da.value,((a,t)=>(i(),e(n,{class:"hot-item",key:t,onClick:t=>Ja(a)},{default:l((()=>[r(y,{class:s(["hot-rank",{top:t<3}])},{default:l((()=>[f(p(t+1),1)])),_:2},1032,["class"]),r(n,{class:"hot-thumb"},{default:l((()=>[a.thumb?(i(),e(o,{key:0,class:"hot-thumb-img",src:a.thumb,mode:"aspectFill"},null,8,["src"])):(i(),e(y,{key:1,class:"hot-thumb-emoji"},{default:l((()=>[f(p(a.emoji),1)])),_:2},1024))])),_:2},1024),r(n,{class:"hot-content"},{default:l((()=>[r(n,{class:"hot-row"},{default:l((()=>[r(y,{class:"hot-text"},{default:l((()=>[f(p(a.text),1)])),_:2},1024),a.badge?(i(),e(y,{key:0,class:s(["hot-badge",a.badgeType||"badge-hot"])},{default:l((()=>[f(p(a.badge),1)])),_:2},1032,["class"])):_("",!0)])),_:2},1024),r(y,{class:"hot-meta"},{default:l((()=>[f(p(a.views)+" æ¬¡æµè§ˆ Â· "+p(a.posts)+" æ¡è®¨è®º Â· "+p(a.mood||"è®¨è®ºæ­£çƒ­"),1)])),_:2},1024)])),_:2},1024),r(n,{class:"hot-cta",onClick:k((t=>Ja(a)),["stop"])},{default:l((()=>[f(p(a.cta||"å»çœ‹çœ‹"),1)])),_:2},1032,["onClick"]),r(y,{class:"hot-arrow"},{default:l((()=>[f("â€º")])),_:1})])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),r(n,{class:"moments-list"},{default:l((()=>[(i(!0),h(g,null,v(ma.value,((a,t)=>(i(),e(n,{class:"moment-item",key:t},{default:l((()=>[r(o,{class:"user-avatar avatar-glow",src:a.avatar,mode:"aspectFill"},null,8,["src"]),r(n,{class:"content-area"},{default:l((()=>[r(n,{class:"meta-row"},{default:l((()=>[r(y,{class:"username"},{default:l((()=>[f(p(a.username),1)])),_:2},1024)])),_:2},1024),r(n,{class:"chip-row"},{default:l((()=>[r(y,{class:"chip"},{default:l((()=>[f("åŒ¿å")])),_:1}),a.mediaType?(i(),e(y,{key:0,class:"chip ghost"},{default:l((()=>[f("å›¾æ–‡")])),_:1})):_("",!0)])),_:2},1024),r(n,{class:s(["text-block",{clamped:!Ua.value[t]}])},{default:l((()=>[r(y,{class:"text-content"},{default:l((()=>[f(p(a.content),1)])),_:2},1024)])),_:2},1032,["class"]),a.content&&a.content.length>60?(i(),e(n,{key:0,class:"expand-btn",onClick:a=>(a=>{Ua.value[a]=!Ua.value[a]})(t)},{default:l((()=>[f(p(Ua.value[t]?"æ”¶èµ·":"å±•å¼€"),1)])),_:2},1032,["onClick"])):_("",!0),a.mediaType?(i(),e(n,{key:1,class:"media-content"},{default:l((()=>["video"===a.mediaType?(i(),e(V,{key:0,src:a.mediaUrl,poster:a.poster,class:"video-content video-radius",controls:"","show-center-play-btn":"","enable-play-gesture":"","show-fullscreen-btn":"","show-play-btn":"","object-fit":"contain",onError:_a},null,8,["src","poster"])):"image"===a.mediaType?(i(),e(n,{key:1,class:s(["image-gallery",`columns-${a.mediaUrls.length}`])},{default:l((()=>[(i(!0),h(g,null,v(a.mediaUrls,((t,l)=>(i(),e(o,{key:l,src:t,mode:"aspectFill",class:"image-content image-radius",onClick:e=>{return l=a.mediaUrls,s=t,void(l&&l.length&&b({urls:l,current:s}));var l,s}},null,8,["src","onClick"])))),128))])),_:2},1032,["class"])):_("",!0),r(n,{class:"media-badges"},{default:l((()=>[r(n,{class:"badge ghost"},{default:l((()=>[r(y,{class:"b-ic"},{default:l((()=>[f("ğŸ”¥")])),_:1}),r(y,{class:"b-txt"},{default:l((()=>[f(p(Sa(Ea(a))),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):_("",!0),r(n,{class:"bottom-info"},{default:l((()=>[r(y,{class:"time"},{default:l((()=>[f(p(a.time),1)])),_:2},1024),r(n,{class:"actions"},{default:l((()=>[r(n,{class:s(["action-btn like-btn",{liked:a.isLiked,animating:na.value[t]}]),onClick:a=>(async a=>{await Ia(a),ja(3)})(t)},{default:l((()=>[r(y,{class:"icon iconfont"},{default:l((()=>[f(p(a.isLiked?"â¤ï¸":"ğŸ¤"),1)])),_:2},1024),r(y,{class:"action-text"},{default:l((()=>[f(p(a.isLiked?"å·²èµ":"ç‚¹èµ"),1)])),_:2},1024),r(y,{class:"action-count"},{default:l((()=>[f(p(a.likes&&a.likes.length||0),1)])),_:2},1024),na.value[t]?(i(),e(n,{key:0,class:"like-burst-particles"},{default:l((()=>[(i(),h(g,null,v(8,(a=>r(n,{key:a,class:s(["particle","p"+a])},null,8,["class"]))),64))])),_:1})):_("",!0)])),_:2},1032,["class","onClick"]),r(n,{class:"action-btn comment-btn",onClick:a=>(a=>{ca.value=a,la.value=!0})(t)},{default:l((()=>[r(y,{class:"icon iconfont"},{default:l((()=>[f("ğŸ’¬")])),_:1}),r(y,{class:"action-text"},{default:l((()=>[f("è¯„è®º")])),_:1}),r(y,{class:"action-count"},{default:l((()=>[f(p(a.comments&&a.comments.length||0),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),a.likes&&a.likes.length?(i(),e(n,{key:2,class:"likes-section"},{default:l((()=>[r(y,{class:"like-users"},{default:l((()=>[f(p(a.likes.join("ã€")),1)])),_:2},1024)])),_:2},1024)):_("",!0),a.contactValue?(i(),e(n,{key:3,class:"contact-section"},{default:l((()=>[r(y,{class:"contact-icon"},{default:l((()=>[f("ğŸ“")])),_:1}),r(y,{class:"contact-text"},{default:l((()=>{return[f(p((t=a.contactType,{wechat:"å¾®ä¿¡",phone:"æ‰‹æœº",qq:"QQ",email:"é‚®ç®±"}[t]||"è”ç³»"))+"ï¼š"+p(a.contactValue),1)];var t})),_:2},1024)])),_:2},1024)):_("",!0),a.ratingType?(i(),e(n,{key:4,class:"rating-section"},{default:l((()=>[r(n,{class:"rating-header"},{default:l((()=>[r(y,{class:"rating-icon"},{default:l((()=>[f("â­")])),_:1}),r(y,{class:"rating-title"},{default:l((()=>[f(p(Wa(a.ratingType)),1)])),_:2},1024),r(y,{class:"rating-range"},{default:l((()=>[f("("+p(a.ratingMin)+"-"+p(a.ratingMax)+"åˆ†)",1)])),_:2},1024)])),_:2},1024),a.ratingStats?(i(),e(n,{key:0,class:"rating-stats"},{default:l((()=>[r(n,{class:"rating-avg"},{default:l((()=>[r(y,{class:"avg-score"},{default:l((()=>[f(p(a.ratingStats.average.toFixed(1)),1)])),_:2},1024),r(y,{class:"avg-label"},{default:l((()=>[f("å¹³å‡åˆ†")])),_:1})])),_:2},1024),r(n,{class:"rating-count"},{default:l((()=>[r(y,{class:"count-num"},{default:l((()=>[f(p(a.ratingStats.count),1)])),_:2},1024),r(y,{class:"count-label"},{default:l((()=>[f("äººè¯„åˆ†")])),_:1})])),_:2},1024)])),_:2},1024)):_("",!0),r(n,{class:"rating-actions"},{default:l((()=>[r(n,{class:"rating-btn",onClick:a=>(a=>{et.value=a,Xa.value=ma.value[a],at.value=0,tt.value="",Za.value=!0})(t)},{default:l((()=>[r(y,{class:"rating-btn-icon"},{default:l((()=>[f("â­")])),_:1}),r(y,{class:"rating-btn-text"},{default:l((()=>[f("è¯„åˆ†")])),_:1})])),_:2},1032,["onClick"]),r(n,{class:"rating-btn",onClick:a=>(a=>{var t,e,l;const s=ma.value[a];M({title:`${Wa(s.ratingType)}è¯¦æƒ…`,content:`å¹³å‡åˆ†ï¼š${(null==(e=null==(t=s.ratingStats)?void 0:t.average)?void 0:e.toFixed(1))||0}åˆ†\nè¯„åˆ†äººæ•°ï¼š${(null==(l=s.ratingStats)?void 0:l.count)||0}äºº\nè¯„åˆ†èŒƒå›´ï¼š${s.ratingMin}-${s.ratingMax}åˆ†`,showCancel:!1})})(t)},{default:l((()=>[r(y,{class:"rating-btn-icon"},{default:l((()=>[f("ğŸ“Š")])),_:1}),r(y,{class:"rating-btn-text"},{default:l((()=>[f("è¯¦æƒ…")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):_("",!0),a.comments&&0!==a.comments.length?(i(),e(n,{key:5,class:"comments-section"},{default:l((()=>[(i(!0),h(g,null,v(a.comments,((a,t)=>(i(),e(n,{class:"comment-item",key:t},{default:l((()=>[r(o,{class:"comment-anon-icon",src:a.avatar||d(R)},null,8,["src"]),r(y,{class:"comment-user"},{default:l((()=>[f(p(a.username)+"ï¼š",1)])),_:2},1024),r(y,{class:"comment-content"},{default:l((()=>[f(p(a.content),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):_("",!0)])),_:2},1024),r(n,{class:"more-btn",onClick:a=>{w({itemList:["ä¸¾æŠ¥","æ‹‰é»‘","ä¸æ„Ÿå…´è¶£"],success:a=>{const t=a.tapIndex;0===t?c({title:"å·²æ”¶åˆ°ä¸¾æŠ¥",icon:"none"}):1===t?c({title:"å·²æ‹‰é»‘è¯¥ç”¨æˆ·",icon:"none"}):2===t&&c({title:"å°†å‡å°‘ç±»ä¼¼å†…å®¹",icon:"none"})}})}},{default:l((()=>[f("â‹¯")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1}),la.value?(i(),e(n,{key:1,class:"comment-popup",onClick:va},{default:l((()=>[r(n,{class:"comment-box animated-popup",onClick:t[1]||(t[1]=k((()=>{}),["stop"]))},{default:l((()=>[r(n,{class:"comment-input-area"},{default:l((()=>[r($,{class:"comment-input",modelValue:oa.value,"onUpdate:modelValue":t[0]||(t[0]=a=>oa.value=a),placeholder:"@åŒ¿åç”¨æˆ· è¯´ç‚¹ä»€ä¹ˆ...",focus:la.value,onConfirm:pa},null,8,["modelValue","focus"]),r(n,{class:"toolbar"},{default:l((()=>[r(y,{class:"emoji-btn",onClick:ga},{default:l((()=>[f("ğŸ˜Š")])),_:1}),r(A,{class:s(["submit-btn",{active:oa.value.trim()}]),onClick:pa},{default:l((()=>[f("å‘é€")])),_:1},8,["class"])])),_:1})])),_:1}),sa.value?(i(),e(n,{key:0,class:"emoji-panel"},{default:l((()=>[r(P,{"scroll-y":"",class:"emoji-list"},{default:l((()=>[r(n,{class:"emoji-group"},{default:l((()=>[(i(),h(g,null,v(dt,((a,t)=>r(y,{key:t,class:"emoji-item",onClick:t=>(a=>{oa.value+=a})(a)},{default:l((()=>[f(p(a),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),_:1})])),_:1})):_("",!0)])),_:1})])),_:1})):_("",!0),Za.value?(i(),e(n,{key:2,class:"rating-popup",onClick:Aa},{default:l((()=>[r(n,{class:"rating-box animated-popup",onClick:t[3]||(t[3]=k((()=>{}),["stop"]))},{default:l((()=>[r(n,{class:"rating-header"},{default:l((()=>[r(y,{class:"rating-title"},{default:l((()=>{var a;return[f(p(Wa(null==(a=Xa.value)?void 0:a.ratingType)),1)]})),_:1}),r(y,{class:"rating-close",onClick:Aa},{default:l((()=>[f("âœ•")])),_:1})])),_:1}),r(n,{class:"rating-content"},{default:l((()=>[r(n,{class:"rating-stars"},{default:l((()=>[(i(),h(g,null,v(10,(a=>r(y,{key:a,class:s(["star",{active:a<=at.value}]),onClick:t=>{return e=a,void(at.value=e);var e}},{default:l((()=>[f("â­")])),_:2},1032,["class","onClick"]))),64))])),_:1}),r(n,{class:"rating-score"},{default:l((()=>[r(y,{class:"score-text"},{default:l((()=>[f(p(at.value)+"/10",1)])),_:1})])),_:1}),r(n,{class:"rating-comment"},{default:l((()=>[r(D,{class:"comment-input",modelValue:tt.value,"onUpdate:modelValue":t[2]||(t[2]=a=>tt.value=a),placeholder:"è¯´è¯´ä½ çš„çœ‹æ³•...ï¼ˆå¯é€‰ï¼‰",maxlength:"100"},null,8,["modelValue"])])),_:1})])),_:1}),r(n,{class:"rating-actions"},{default:l((()=>[r(A,{class:s(["rating-submit-btn",{active:at.value>0}]),onClick:Pa},{default:l((()=>[f(" æäº¤è¯„åˆ† ")])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})):_("",!0),r(n,{class:s(["music-btn",{playing:Qa.value}]),onClick:nt},{default:l((()=>[r(y,{class:"music-icon"},{default:l((()=>[f("â™ª")])),_:1})])),_:1},8,["class"]),xa.value?(i(),e(n,{key:3,class:"fireworks"},{default:l((()=>[(i(!0),h(g,null,v(Ca.value,(a=>(i(),e(n,{key:a.id,class:"fw",style:m({left:a.x+"%",top:a.y+"%"})},{default:l((()=>[(i(),h(g,null,v(12,(t=>r(n,{key:t,class:s(["fw-p","p"+t,a.theme])},null,8,["class"]))),64))])),_:2},1032,["style"])))),128))])),_:1})):_("",!0)])),_:1},8,["class"])}}},[["__scopeId","data-v-d61dd9c8"]]);export{Q as default};
