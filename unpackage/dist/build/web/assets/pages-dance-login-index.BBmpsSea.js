import{r as e,O as a,a2 as l,e as s,w as t,x as n,c as o,f as u,h as c,k as d,t as r,s as i,a3 as p,y as v,I as m,z as g}from"./index-D7ax0EFp.js";import{_ as h}from"./_plugin-vue_export-helper.BCo6x5W8.js";const _=h({__name:"index",setup(h){const _=e(""),f=e(""),b=e(!1),x=e(60);let y=null;const V=async()=>{if(w.value)try{I();const e=await p({url:"YOUR_API_URL/sendCode",method:"POST",data:{phone:_.value}});if(200!==e.data.code)throw new Error(e.data.message||"发送失败");i({title:"验证码已发送",icon:"success"})}catch(e){j(),i({title:e.message||"发送验证码失败，请重试",icon:"none"})}else i({title:"请输入正确的手机号",icon:"none"})},I=()=>{b.value=!0,x.value=60,y=setInterval((()=>{x.value--,x.value<=0&&j()}),1e3)},j=()=>{y&&(clearInterval(y),y=null),b.value=!1,x.value=60},w=a((()=>_.value&&/^1[3-9]\d{9}$/.test(_.value))),U=a((()=>w.value&&6===f.value.length));l((()=>{j()}));const k=()=>{_.value&&11===_.value.length?f.value&&6===f.value.length||i({title:"请输入正确的验证码",icon:"none"}):i({title:"请输入正确的手机号",icon:"none"})};return(e,a)=>{const l=v,i=n,p=m,h=g;return o(),s(i,{class:"login-container"},{default:t((()=>[u(l,{class:"logo",src:"https://objectstorageapi.bja.sealos.run/ppny09lg-uu-img/微信图片_20241119193419.png",mode:"aspectFit"}),u(i,{class:"login-form"},{default:t((()=>[u(i,{class:"input-group"},{default:t((()=>[u(i,{class:"country-code"},{default:t((()=>[c("中国 +86")])),_:1}),u(p,{type:"number",modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),placeholder:"手机号","placeholder-class":"placeholder",maxlength:"11"},null,8,["modelValue"])])),_:1}),u(i,{class:"input-group"},{default:t((()=>[u(p,{type:"number",modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=e=>f.value=e),placeholder:"验证码","placeholder-class":"placeholder",maxlength:"6"},null,8,["modelValue"]),u(h,{class:d(["code-btn",{counting:b.value}]),onClick:V},{default:t((()=>[c(r(b.value?`${x.value}s后重试`:"获取验证码"),1)])),_:1},8,["class"])])),_:1}),u(h,{class:"login-btn",onClick:k,disabled:!U.value},{default:t((()=>[c("登录")])),_:1},8,["disabled"])])),_:1})])),_:1})}}},[["__scopeId","data-v-352b231a"]]);export{_ as default};
