import{r as a,o as e,e as t,w as l,k as s,l as o,s as n,a4 as c,x as i,c as u,f as r,h as d,t as m,A as f,u as p,n as h,i as v,j as g,F as _,B as k,m as y,q as b,D as w,W as M,H as x,J as C,v as T,y as I,U as j,I as q,z as F,S as L}from"./index-DwU0Xoyq.js";import{a as E,b as S,c as $,o as A,d as U}from"./uni-app.es.qbOI_1v-.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";const P=V({__name:"index",setup(V){const P=["æ˜Ÿæ²³æ—…äºº","å¤æ—¥å¾®é£","è“è“æ±½æ°´","æ©™å­æ±½çƒ","å¤œç©ºå®ˆæœ›","æ™¨æ›¦å¾®å…‰","äº‘ç«¯æ¼«æ­¥","æœˆä¸‹ç‹¬è¡Œ","ç™½èŒ¶æ¸…æ¬¢","é’æŸ æ—¶å…‰","æ¸©æŸ”æ˜Ÿçƒ","æ™´ç©ºä¸‡é‡Œ","é£ä¸­è¯—äºº","æµ·ç›å†°æ²™","å±±é‡å¬é£","æ©˜å­æµ·å²¸","é“¶æ²³ä¿¡ä½¿","å¾®å…‰æ‹¾æ¢¦","æ™šé£é‚®å·®","é›¾é‡Œçœ‹èŠ±","æ£®æ—ä¹‹å¿ƒ","é›¨ååˆæ™´","äº‘æœµæ”¶é›†è€…","å¤å¤œè¤ç«"];function D(){return P[Math.floor(Math.random()*P.length)]}const J=["https://qcloud.dpfile.com/pc/pawK4KeJSDNVINhfwh9CoLJPFluB-tnHSd3heJ_jybtNIYslSlGEPeQVyA4hZRCP.jpg","https://images.unsplash.com/photo-1502685104226-ee32379fefbe?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1527980965255-d3b416303d12?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=256&q=60","https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=256&q=60"],H=J[Math.floor(Math.random()*J.length)],N=["https://images.unsplash.com/photo-1557672172-298e090bd0f1?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1475924156734-496f6cac6ec1?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1472214103451-9374bd1c798e?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1470770841072-f978cf4d019e?auto=format&fit=crop&w=1400&q=80","https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1400&q=80"],Q=N[Math.floor(Math.random()*N.length)],z=H,B=["ä»Šå¤©ä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ï¼","åŒ¿ååˆ†äº«ï¼Œè½»æ¾è‡ªåœ¨~","æ¯ä¸€å¤©éƒ½å€¼å¾—è®°å½•ã€‚","ç”¨å¿ƒæ„Ÿå—ç”Ÿæ´»çš„ç¾å¥½ã€‚","ç§‘æŠ€è®©åŒ¿åæ›´æ¸©æš–ã€‚","ä¸–ç•Œå¾ˆå¤§ï¼Œå¿ƒæƒ…å¾ˆç¾ã€‚","åšè‡ªå·±çš„å°å¤ªé˜³ â˜€ï¸","åŒ¿åä¸å­¤å•ï¼Œæ¸©æš–åœ¨èº«è¾¹ã€‚","è®°å½•æ­¤åˆ»ï¼Œé‡è§æ›´å¥½çš„è‡ªå·±ã€‚","ä¿æŒå¥½å¥‡ï¼Œä¿æŒçƒ­çˆ±ï¼"],K=B[Math.floor(Math.random()*B.length)],Y=["åŒ¿åæ ‘æ´ Â· ç¾å¥½ç”Ÿæ´»","ç”¨æ¸©æŸ”æ²»æ„ˆä¸–ç•Œ","æ¯ä¸€å¤©éƒ½å€¼å¾—è®°å½•","è®©å¿ƒæƒ…è‡ªç”±æµåŠ¨","ç§‘æŠ€è®©æ¸©æš–å‘ç”Ÿ","åœ¨è¿™é‡Œé‡è§ç¾å¥½","åˆ†äº«ä½ çš„æ•…äº‹","åšè‡ªå·±çš„å°å¤ªé˜³","ä¸–ç•Œå¾ˆå¤§ï¼Œæ¸©æš–å¾ˆè¿‘","ç”¨åŒ¿åå®ˆæŠ¤çœŸå¿ƒ"];a(Y[0]);const G=a(""),R=a(!0);let W=null,Z=0,O=0;function X(){clearTimeout(W);const a=Y[Z];G.value="",O=0,function e(){O<=a.length?(G.value=a.slice(0,O),O++,W=setTimeout(e,60)):setTimeout((()=>{Z=(Z+1)%Y.length,X()}),1800)}()}e((()=>{X(),setInterval((()=>{R.value=!R.value}),500),ne()}));const aa=a(!1),ea=a(!1),ta=a(""),la=a(-1),sa=a({}),oa=a(1),na=a(10),ca=a(!1),ia=a(!0),ua=a([]),ra=async(a=!1)=>{if(!ca.value&&(ia.value||a))try{ca.value=!0;const t=new Promise((a=>setTimeout(a,800))),[{result:l}]=await Promise.all([o.callFunction({name:"wx_get_list",data:{page:a?1:oa.value,pageSize:na.value}}),t]);if(0!==l.code)throw new Error(l.msg);{const t=l.data.list.map((a=>({...a,username:D(),avatar:J[Math.floor(Math.random()*J.length)],comments:(a.comments||[]).map((a=>({...a,username:D(),avatar:J[Math.floor(Math.random()*J.length)]}))),likes:(a.likes||[]).map((()=>D()))})));if(a)ua.value=t,oa.value=2;else{const a=new Set((ua.value||[]).map((a=>a._id))),e=t.filter((e=>!a.has(e._id)));ua.value=[...ua.value||[],...e],oa.value++}ia.value=l.data.hasMore;try{Ja()}catch(e){}}}catch(t){n({title:t.message||"è·å–æœ‹å‹åœˆå¤±è´¥",icon:"none"})}finally{ca.value=!1,a&&c()}};E((()=>{ra(!0),ja(),Ia(),setTimeout((()=>{ra(!0)}),33e3),ae()})),S((()=>{ja(),Za()})),$((()=>{ja(),Za()})),A((()=>{!ca.value&&ia.value&&ra()}));const da=async()=>{if(ta.value.trim()){aa.value=!1,ea.value=!1,n({title:"è¯„è®ºæˆåŠŸ",icon:"none"});try{const{result:a}=await o.callFunction({name:"wx_add_comment",data:{momentId:ua.value[la.value]._id,content:ta.value}});if(0!==a.code)throw new Error(a.msg);{const a=ua.value[la.value];a.comments||(a.comments=[]),a.comments.push({username:D(),content:ta.value,create_time:Date.now()}),ta.value=""}}catch(a){n({title:a.message||"è¯„è®ºå¤±è´¥",icon:"none"})}}},ma=async()=>{y({url:"/pages/wx/home/add"})},fa=()=>{aa.value=!1,ea.value=!1,ta.value="",la.value=-1},pa=()=>{ea.value=!ea.value},ha=()=>{n({title:"è§†é¢‘åŠ è½½å¤±è´¥",icon:"none"})},va=()=>{w({itemList:["åˆ‡æ¢ä¸»é¢˜","å†…å®¹åå¥½","å¸®åŠ©ä¸åé¦ˆ"],success:a=>{const e=a.tapIndex;0===e&&n({title:"å·²åˆ‡æ¢ä¸»é¢˜",icon:"none"}),1===e&&n({title:"åå¥½è®¾ç½®æš‚æœªå¼€æ”¾",icon:"none"}),2===e&&n({title:"æ„Ÿè°¢ä½ çš„åé¦ˆ",icon:"none"})}})},ga=a(0);U((a=>{const e=a.scrollTop||0;ga.value=Math.min(30,.2*e)}));const _a=a("theme-day"),ka=()=>{const a=(new Date).getHours();_a.value=a>=6&&a<11?"theme-morning":a>=11&&a<18?"theme-day":"theme-night"};e((()=>{ka(),setInterval(ka,6e5)}));const ya=a(!1),ba=a([]);let wa=0;const Ma=a=>{const e=ba.value.findIndex((e=>e.id===a));-1!==e&&ba.value.splice(e,1)},xa=(a=4,e=1e3)=>{ya.value=!0;const t=Math.max(1,a),l=Math.floor(e/t);for(let s=0;s<t;s++){setTimeout((()=>{const a=wa++;ba.value.push({id:a,x:Math.floor(10+80*Math.random()),y:Math.floor(18+54*Math.random()),theme:["t-blue","t-violet","t-gold","t-mint","t-pink"][Math.floor(5*Math.random())]}),setTimeout((()=>{Ma(a),0===ba.value.length&&(ya.value=!1)}),2200)}),s*l)}},Ca=async a=>{try{const e=ua.value[a];sa.value[a]=!0;const{result:t}=await o.callFunction({name:"wx_add_toggle_like",data:{momentId:e._id}});if(0!==t.code)throw new Error(t.msg);e.isLiked=t.data.isLiked,e.isLiked?(e.likes||(e.likes=[]),e.likes.push(D())):e.likes.pop(),setTimeout((()=>{sa.value[a]=!1}),1e3)}catch(e){n({title:e.message||"æ“ä½œå¤±è´¥",icon:"none"})}};let Ta=null;const Ia=()=>{Ta||(ya.value=!0,Ta=setInterval((()=>{const a=3+Math.floor(3*Math.random()),e=1e3+Math.floor(600*Math.random());xa(a,e)}),1500+Math.floor(900*Math.random())))},ja=()=>{clearInterval(Ta),Ta=null,ya.value=!1,ba.value=[]},qa=a=>a||0===a?a>=1e4?(a/1e4).toFixed(1).replace(/\.0$/,"")+"w":a>=1e3?(a/1e3).toFixed(1).replace(/\.0$/,"")+"k":String(a):"0",Fa=a=>{const e=a.likes&&a.likes.length||0,t=a.comments&&a.comments.length||0,l="video"===a.mediaType;return Math.floor(3*e+5*t+(l?18:8))};a("recommend");const La=a({});a([{tag:"# ç²¾é€‰",title:"ä»Šæ—¥çƒ­èŠï¼šåŒ¿åä¹Ÿè¦æœ‰æ€åº¦",sub:"æ¥ä¸€æ¡èµ°å¿ƒçš„åˆ†äº«å§"},{tag:"# æ–°é²œ",title:"ä½ çš„å°ç¡®å¹¸ï¼Œå€¼å¾—è¢«çœ‹åˆ°",sub:"è®°å½•å½“ä¸‹ï¼Œæ¸©æš–ä¸€æ•´å¤©"},{tag:"# é™„è¿‘",title:"å‘ç°èº«è¾¹çš„ç¾å¥½ç¬é—´",sub:"åŒåŸçƒ­ç‚¹ï¼Œé©¬ä¸ŠåŠ å…¥"}]);a([{text:"# ä»Šå¤©ä½ åŒ¿åè¡¨ç™½äº†å—",views:"12.3w",posts:"2.1k",emoji:"ğŸ’Œ",badge:"çƒ­è®®",badgeType:"badge-hot",cta:"å‚ä¸"},{text:"# åŸå¸‚æ ‘æ´ï¼šä½ çš„å°çƒ¦æ¼",views:"8.7w",posts:"1.2k",emoji:"ğŸŒ†",badge:"åŒåŸ",badgeType:"badge-near",cta:"å»çœ‹çœ‹",mood:"æ°›å›´å¾ˆæš–"},{text:"# ä¸‰ä»¶è®©ä½ å¿«ä¹çš„å°äº‹",views:"6.5w",posts:"980",emoji:"âœ¨",badge:"ç²¾é€‰",badgeType:"badge-new",cta:"æˆ‘ä¹Ÿåˆ†äº«"}]);const Ea=a(!1);let Sa=null;const $a=[];let Aa=Math.floor(Math.random()*$a.length);const Ua=()=>$a[Aa%$a.length],Va=()=>"undefined"==typeof Audio?null:(Sa||(Sa=new Audio(Ua()),Sa.loop=!0,Sa.preload="auto",Sa.volume=.6,Sa.onerror=()=>{try{const a=(Aa=(Aa+1)%$a.length,Ua());Sa.src=a,Ea.value&&Sa.play().catch((()=>{Ea.value=!1,n({title:"èƒŒæ™¯éŸ³ä¹éœ€æ‰‹åŠ¨æ’­æ”¾",icon:"none"})}))}catch(a){}}),Sa),Pa=["today vibes","mood on","little joy","city walk","coffee oâ€™clock","soft light","daily look","slow life"],Da=a([]),Ja=()=>{const a=(()=>{const a=[];return(ua.value||[]).forEach((e=>{"image"===e.mediaType&&Array.isArray(e.mediaUrls)&&e.mediaUrls.forEach((e=>{e&&a.push({url:e})})),Array.isArray(e.mediaList)&&e.mediaList.filter((a=>a&&"image"===a.type&&a.url)).forEach((e=>a.push({url:e.url})))})),a})();if(!a.length)return void(Da.value=[]);const e=a.sort((()=>Math.random()-.5)).slice(0,8);Da.value=e.map((a=>({...a,likes:Math.floor(100+9e3*Math.random()),emoji:["ğŸ’–","ğŸŒ¸","ğŸ“¸","ğŸ˜Š","â˜•","ğŸ‘—","ğŸ§‹","âœ¨"][Math.floor(8*Math.random())],caption:Pa[Math.floor(Math.random()*Pa.length)]})))},Ha=()=>{Ja()},Na=a=>({beauty:"é¢œå€¼è¯„åˆ†",style:"ç©¿æ­è¯„åˆ†",photo:"ç…§ç‰‡è¯„åˆ†"}[a]||"è¯„åˆ†"),Qa=a(!1),za=a(null),Ba=a(0),Ka=a(""),Ya=a(-1);E((()=>{setTimeout((()=>Ja()),400),Ra()})),S((()=>{Wa()})),$((()=>{Wa()}));let Ga=null;const Ra=()=>{Ga||(Ga=setInterval((()=>{Ja()}),5e3))},Wa=()=>{Ga&&(clearInterval(Ga),Ga=null)},Za=()=>{if(Sa)try{Sa.pause()}catch(a){}Ea.value=!1};let Oa=!1;const Xa=()=>{ae()},ae=()=>{const a=Va();a&&(a.muted=!0,a.volume=0,a.play().then((()=>{Ea.value=!0,a.muted=!1,((a=.6,e=1200)=>{const t=Sa;if(!t)return;const l=t.volume||0,s=Math.max(1,Math.floor(e/80));let o=0;const n=setInterval((()=>{o++,t.volume=l+o/s*(a-l),o>=s&&clearInterval(n)}),80)})(.6,1200),"undefined"!=typeof document&&(["touchstart","click","wheel","keydown"].forEach((a=>{try{document.removeEventListener(a,Xa)}catch(e){}})),Oa=!1)})).catch((()=>{"undefined"==typeof document||Oa||(["touchstart","click","wheel","keydown"].forEach((a=>{try{document.addEventListener(a,Xa,{once:!0,passive:!0})}catch(e){}})),Oa=!0)})))},ee=["ğŸ˜Š","ğŸ˜‚","ğŸ¤£","â¤ï¸","ğŸ˜","ğŸ¤”","ğŸ˜’","ğŸ‘","ğŸ‘","ğŸ˜³","ğŸ¥º","ğŸ˜­","ğŸ˜˜","ğŸ¤—","ğŸ™„","ğŸ˜´","ğŸ¤®","ğŸ¤§","ğŸ˜·","ğŸ¤’","ğŸ¤•","ğŸ˜ˆ","ğŸ‘»","ğŸ‘½","ğŸ¤–","ğŸ’©","ğŸ˜º","ğŸ’ª","ğŸ‘Š","âœŒï¸","ğŸ¤","ğŸ™","ğŸ‘","ğŸ™Œ","ğŸ‘","ğŸ¤²"],te=a(!0),le=a(30);let se=null;const oe=()=>{te.value=!1,se&&(clearInterval(se),se=null)},ne=()=>{se=setInterval((()=>{le.value--,le.value<=0&&oe()}),1e3)},ce=async(a,e)=>{try{x({title:"å¤„ç†ä¸­..."});const e=ua.value[a],{result:t}=await o.callFunction({name:"wx_del",data:{momentId:e._id}});if(0!==t.code)throw new Error(t.msg||"åˆ é™¤å¤±è´¥");ua.value.splice(a,1),C(),n({title:"ä¸¾æŠ¥å·²æˆåŠŸ",icon:"none",duration:2e3})}catch(t){C(),n({title:t.message||"æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}};return(a,e)=>{const o=T,c=i,y=I,x=j,C=q,E=F,S=L;return u(),t(c,{class:s(["moments-container",_a.value,{"disclaimer-hidden":!te.value}])},{default:l((()=>[te.value?(u(),t(c,{key:0,class:"disclaimer-banner"},{default:l((()=>[r(c,{class:"disclaimer-banner-content"},{default:l((()=>[r(c,{class:"disclaimer-banner-left"},{default:l((()=>[r(o,{class:"disclaimer-banner-icon"},{default:l((()=>[d("âš ï¸")])),_:1}),r(o,{class:"disclaimer-banner-text"},{default:l((()=>[d(" æœ¬ç½‘ç«™ä»…ä¾›ç¼–ç¨‹å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œéå•†ä¸šç½‘ç«™ï¼Œæ‰€æœ‰å†…å®¹å‡ä¸ºå­¦ä¹ æ¼”ç¤ºï¼ŒçœŸå®æ€§æ— æ³•ä¿è¯ã€‚è¯·ç†æ€§å¯¹å¾…ï¼Œåˆ‡å‹¿è½»ä¿¡ã€‚ä¸¥ç¦å‘å¸ƒè¿æ³•è¿è§„å†…å®¹ï¼Œç”¨æˆ·éœ€å¯¹å‘å¸ƒå†…å®¹è´Ÿè´£ã€‚ ")])),_:1})])),_:1}),r(c,{class:"disclaimer-banner-right"},{default:l((()=>[r(o,{class:"disclaimer-banner-timer"},{default:l((()=>[d(m(le.value)+"s",1)])),_:1}),r(o,{class:"disclaimer-banner-close",onClick:oe},{default:l((()=>[d("âœ•")])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0),r(c,{class:"header"},{default:l((()=>[r(y,{class:"bg-image",src:p(Q),mode:"aspectFill",style:h({transform:`translateY(${ga.value}px) scale(1.06)`})},null,8,["src","style"]),r(c,{class:"header-gradient"}),r(c,{class:"header-blur"}),r(c,{class:"header-glow"}),r(c,{class:"header-topbar"},{default:l((()=>[r(o,{class:"brand"},{default:l((()=>[d("åŒ¿ååœˆ")])),_:1}),r(c,{class:"top-actions"},{default:l((()=>[r(o,{class:"top-icon",onClick:va},{default:l((()=>[d("â‹¯")])),_:1})])),_:1})])),_:1}),r(c,{class:"hero-card"},{default:l((()=>[r(y,{class:"hero-avatar",src:p(z),mode:"aspectFill"},null,8,["src"]),r(c,{class:"hero-text"},{default:l((()=>[r(o,{class:"hero-title"},{default:l((()=>[d(m(p(K)),1)])),_:1}),r(o,{class:"hero-sub"},{default:l((()=>[d("åŒ¿å Â· æ¸©æš– Â· çœŸå®")])),_:1}),r(c,{class:"hero-chips"},{default:l((()=>[r(o,{class:"chip active"},{default:l((()=>[d("æ¨è")])),_:1}),r(o,{class:"chip"},{default:l((()=>[d("å…³æ³¨")])),_:1}),r(o,{class:"chip"},{default:l((()=>[d("é™„è¿‘")])),_:1})])),_:1})])),_:1})])),_:1}),r(c,{class:"floating-btn",onClick:ma},{default:l((()=>[r(c,{class:"floating-btn-pulse"}),r(c,{class:"floating-btn-inner"},{default:l((()=>[r(y,{class:"floating-btn-icon",src:"https://img.icons8.com/fluency/48/plus.png",mode:"aspectFit"})])),_:1}),r(o,{class:"floating-btn-label"},{default:l((()=>[d("å‘å¸ƒ")])),_:1})])),_:1})])),_:1}),Da.value.length?(u(),t(c,{key:1,class:"photo-showcase"},{default:l((()=>[r(c,{class:"ps-header"},{default:l((()=>[r(o,{class:"ps-title"},{default:l((()=>[d("æœ€ç¾ç…§ç‰‡")])),_:1}),r(o,{class:"ps-action",onClick:Ha},{default:l((()=>[d("æ¢ä¸€æ¢")])),_:1})])),_:1}),r(c,{class:"ps-row"},{default:l((()=>[(u(!0),v(_,null,g(Da.value,((a,e)=>(u(),t(c,{class:"ps-item",key:e,onClick:a=>(a=>{const e=Da.value.map((a=>a.url));b({urls:e,current:e[a]})})(e)},{default:l((()=>[r(y,{class:"ps-img",src:a.url,mode:"aspectFill"},null,8,["src"]),r(c,{class:"ps-overlay"},{default:l((()=>[r(c,{class:"ps-cap"},{default:l((()=>[r(o,{class:"ps-emoji"},{default:l((()=>[d(m(a.emoji),1)])),_:2},1024),r(o,{class:"ps-text"},{default:l((()=>[d(m(a.caption),1)])),_:2},1024)])),_:2},1024),r(o,{class:"ps-like"},{default:l((()=>[d("â¤ "+m(qa(a.likes)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):f("",!0),r(c,{class:"moments-list"},{default:l((()=>[(u(!0),v(_,null,g(ua.value,((a,e)=>(u(),t(c,{class:"moment-item",key:e},{default:l((()=>[r(y,{class:"user-avatar avatar-glow",src:a.avatar,mode:"aspectFill"},null,8,["src"]),r(c,{class:"content-area"},{default:l((()=>[r(c,{class:"meta-row"},{default:l((()=>[r(o,{class:"username"},{default:l((()=>[d(m(a.username),1)])),_:2},1024)])),_:2},1024),r(c,{class:"chip-row"},{default:l((()=>[r(o,{class:"chip"},{default:l((()=>[d("åŒ¿å")])),_:1}),a.mediaType?(u(),t(o,{key:0,class:"chip ghost"},{default:l((()=>[d("å›¾æ–‡")])),_:1})):f("",!0)])),_:2},1024),r(c,{class:s(["text-block",{clamped:!La.value[e]}])},{default:l((()=>[r(o,{class:"text-content"},{default:l((()=>[d(m(a.content),1)])),_:2},1024)])),_:2},1032,["class"]),a.content&&a.content.length>60?(u(),t(c,{key:0,class:"expand-btn",onClick:a=>(a=>{La.value[a]=!La.value[a]})(e)},{default:l((()=>[d(m(La.value[e]?"æ”¶èµ·":"å±•å¼€"),1)])),_:2},1032,["onClick"])):f("",!0),a.mediaType?(u(),t(c,{key:1,class:"media-content"},{default:l((()=>["video"===a.mediaType?(u(),t(x,{key:0,src:a.mediaUrl,poster:a.poster,class:"video-content video-radius",controls:"","show-center-play-btn":"","enable-play-gesture":"","show-fullscreen-btn":"","show-play-btn":"","object-fit":"contain",onError:ha},null,8,["src","poster"])):"image"===a.mediaType?(u(),t(c,{key:1,class:s(["image-gallery",`columns-${a.mediaUrls.length}`])},{default:l((()=>[(u(!0),v(_,null,g(a.mediaUrls,((e,l)=>(u(),t(y,{key:l,src:e,mode:"aspectFill",class:"image-content image-radius",onClick:t=>{return l=a.mediaUrls,s=e,void(l&&l.length&&b({urls:l,current:s}));var l,s}},null,8,["src","onClick"])))),128))])),_:2},1032,["class"])):f("",!0),r(c,{class:"media-badges"},{default:l((()=>[r(c,{class:"badge ghost"},{default:l((()=>[r(o,{class:"b-ic"},{default:l((()=>[d("ğŸ”¥")])),_:1}),r(o,{class:"b-txt"},{default:l((()=>[d(m(qa(Fa(a))),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):f("",!0),r(c,{class:"bottom-info"},{default:l((()=>[r(o,{class:"time"},{default:l((()=>[d(m(a.time),1)])),_:2},1024),r(c,{class:"actions"},{default:l((()=>[r(c,{class:s(["action-btn like-btn",{liked:a.isLiked,animating:sa.value[e]}]),onClick:a=>(async a=>{await Ca(a),xa(3)})(e)},{default:l((()=>[r(o,{class:"icon iconfont"},{default:l((()=>[d(m(a.isLiked?"â¤ï¸":"ğŸ¤"),1)])),_:2},1024),r(o,{class:"action-text"},{default:l((()=>[d(m(a.isLiked?"å·²èµ":"ç‚¹èµ"),1)])),_:2},1024),r(o,{class:"action-count"},{default:l((()=>[d(m(a.likes&&a.likes.length||0),1)])),_:2},1024),sa.value[e]?(u(),t(c,{key:0,class:"like-burst-particles"},{default:l((()=>[(u(),v(_,null,g(8,(a=>r(c,{key:a,class:s(["particle","p"+a])},null,8,["class"]))),64))])),_:1})):f("",!0)])),_:2},1032,["class","onClick"]),r(c,{class:"action-btn comment-btn",onClick:a=>(a=>{la.value=a,aa.value=!0})(e)},{default:l((()=>[r(o,{class:"icon iconfont"},{default:l((()=>[d("ğŸ’¬")])),_:1}),r(o,{class:"action-text"},{default:l((()=>[d("è¯„è®º")])),_:1}),r(o,{class:"action-count"},{default:l((()=>[d(m(a.comments&&a.comments.length||0),1)])),_:2},1024)])),_:2},1032,["onClick"]),r(c,{class:"action-btn report-btn",onClick:a=>(a=>{ua.value[a],w({title:"ä¸¾æŠ¥å†…å®¹",itemList:["è‰²æƒ…ä½ä¿—","æš´åŠ›è¡€è…¥","æ”¿æ²»æ•æ„Ÿ","è¯ˆéª—ä¿¡æ¯","åƒåœ¾å¹¿å‘Š","å…¶ä»–è¿è§„"],success:e=>{const t=["è‰²æƒ…ä½ä¿—","æš´åŠ›è¡€è…¥","æ”¿æ²»æ•æ„Ÿ","è¯ˆéª—ä¿¡æ¯","åƒåœ¾å¹¿å‘Š","å…¶ä»–è¿è§„"][e.tapIndex];M({title:"ç¡®è®¤ä¸¾æŠ¥",content:`ç¡®å®šè¦ä¸¾æŠ¥æ­¤å†…å®¹ä¸º"${t}"å—ï¼Ÿ`,success:e=>{e.confirm&&ce(a)}})}})})(e)},{default:l((()=>[r(o,{class:"icon iconfont"},{default:l((()=>[d("ğŸš¨")])),_:1}),r(o,{class:"action-text"},{default:l((()=>[d("ä¸¾æŠ¥")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),a.likes&&a.likes.length?(u(),t(c,{key:2,class:"likes-section"},{default:l((()=>[r(o,{class:"like-users"},{default:l((()=>[d(m(a.likes.join("ã€")),1)])),_:2},1024)])),_:2},1024)):f("",!0),a.contactValue?(u(),t(c,{key:3,class:"contact-section"},{default:l((()=>[r(o,{class:"contact-icon"},{default:l((()=>[d("ğŸ“")])),_:1}),r(o,{class:"contact-text"},{default:l((()=>{return[d(m((e=a.contactType,{wechat:"å¾®ä¿¡",phone:"æ‰‹æœº",qq:"QQ",email:"é‚®ç®±"}[e]||"è”ç³»"))+"ï¼š"+m(a.contactValue),1)];var e})),_:2},1024)])),_:2},1024)):f("",!0),a.ratingType?(u(),t(c,{key:4,class:"rating-section"},{default:l((()=>[r(c,{class:"rating-header"},{default:l((()=>[r(o,{class:"rating-icon"},{default:l((()=>[d("â­")])),_:1}),r(o,{class:"rating-title"},{default:l((()=>[d(m(Na(a.ratingType)),1)])),_:2},1024),r(o,{class:"rating-range"},{default:l((()=>[d("("+m(a.ratingMin)+"-"+m(a.ratingMax)+"åˆ†)",1)])),_:2},1024)])),_:2},1024),a.ratingStats?(u(),t(c,{key:0,class:"rating-stats"},{default:l((()=>[r(c,{class:"rating-avg"},{default:l((()=>[r(o,{class:"avg-score"},{default:l((()=>[d(m(a.ratingStats.average.toFixed(1)),1)])),_:2},1024),r(o,{class:"avg-label"},{default:l((()=>[d("å¹³å‡åˆ†")])),_:1})])),_:2},1024),r(c,{class:"rating-count"},{default:l((()=>[r(o,{class:"count-num"},{default:l((()=>[d(m(a.ratingStats.count),1)])),_:2},1024),r(o,{class:"count-label"},{default:l((()=>[d("äººè¯„åˆ†")])),_:1})])),_:2},1024)])),_:2},1024)):f("",!0),r(c,{class:"rating-actions"},{default:l((()=>[r(c,{class:"rating-btn",onClick:a=>(a=>{Ya.value=a,za.value=ua.value[a],Ba.value=0,Ka.value="",Qa.value=!0})(e)},{default:l((()=>[r(o,{class:"rating-btn-icon"},{default:l((()=>[d("â­")])),_:1}),r(o,{class:"rating-btn-text"},{default:l((()=>[d("è¯„åˆ†")])),_:1})])),_:2},1032,["onClick"]),r(c,{class:"rating-btn",onClick:a=>(a=>{var e,t,l;const s=ua.value[a];M({title:`${Na(s.ratingType)}è¯¦æƒ…`,content:`å¹³å‡åˆ†ï¼š${(null==(t=null==(e=s.ratingStats)?void 0:e.average)?void 0:t.toFixed(1))||0}åˆ†\nè¯„åˆ†äººæ•°ï¼š${(null==(l=s.ratingStats)?void 0:l.count)||0}äºº\nè¯„åˆ†èŒƒå›´ï¼š${s.ratingMin}-${s.ratingMax}åˆ†`,showCancel:!1})})(e)},{default:l((()=>[r(o,{class:"rating-btn-icon"},{default:l((()=>[d("ğŸ“Š")])),_:1}),r(o,{class:"rating-btn-text"},{default:l((()=>[d("è¯¦æƒ…")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):f("",!0),a.comments&&0!==a.comments.length?(u(),t(c,{key:5,class:"comments-section"},{default:l((()=>[(u(!0),v(_,null,g(a.comments,((a,e)=>(u(),t(c,{class:"comment-item",key:e},{default:l((()=>[r(y,{class:"comment-anon-icon",src:a.avatar||p(H)},null,8,["src"]),r(o,{class:"comment-user"},{default:l((()=>[d(m(a.username)+"ï¼š",1)])),_:2},1024),r(o,{class:"comment-content"},{default:l((()=>[d(m(a.content),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):f("",!0)])),_:2},1024),r(c,{class:"more-btn",onClick:a=>{w({itemList:["ä¸¾æŠ¥","æ‹‰é»‘","ä¸æ„Ÿå…´è¶£"],success:a=>{const e=a.tapIndex;0===e?n({title:"å·²æ”¶åˆ°ä¸¾æŠ¥",icon:"none"}):1===e?n({title:"å·²æ‹‰é»‘è¯¥ç”¨æˆ·",icon:"none"}):2===e&&n({title:"å°†å‡å°‘ç±»ä¼¼å†…å®¹",icon:"none"})}})}},{default:l((()=>[d("â‹¯")])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1}),aa.value?(u(),t(c,{key:2,class:"comment-popup",onClick:fa},{default:l((()=>[r(c,{class:"comment-box animated-popup",onClick:e[1]||(e[1]=k((()=>{}),["stop"]))},{default:l((()=>[r(c,{class:"comment-input-area"},{default:l((()=>[r(C,{class:"comment-input",modelValue:ta.value,"onUpdate:modelValue":e[0]||(e[0]=a=>ta.value=a),placeholder:"@åŒ¿åç”¨æˆ· è¯´ç‚¹ä»€ä¹ˆ...",focus:aa.value,onConfirm:da},null,8,["modelValue","focus"]),r(c,{class:"toolbar"},{default:l((()=>[r(o,{class:"emoji-btn",onClick:pa},{default:l((()=>[d("ğŸ˜Š")])),_:1}),r(E,{class:s(["submit-btn",{active:ta.value.trim()}]),onClick:da},{default:l((()=>[d("å‘é€")])),_:1},8,["class"])])),_:1})])),_:1}),ea.value?(u(),t(c,{key:0,class:"emoji-panel"},{default:l((()=>[r(S,{"scroll-y":"",class:"emoji-list"},{default:l((()=>[r(c,{class:"emoji-group"},{default:l((()=>[(u(),v(_,null,g(ee,((a,e)=>r(o,{key:e,class:"emoji-item",onClick:e=>(a=>{ta.value+=a})(a)},{default:l((()=>[d(m(a),1)])),_:2},1032,["onClick"]))),64))])),_:1})])),_:1})])),_:1})):f("",!0)])),_:1})])),_:1})):f("",!0),ya.value?(u(),t(c,{key:3,class:"fireworks"},{default:l((()=>[(u(!0),v(_,null,g(ba.value,(a=>(u(),t(c,{key:a.id,class:"fw",style:h({left:a.x+"%",top:a.y+"%"})},{default:l((()=>[(u(),v(_,null,g(12,(e=>r(c,{key:e,class:s(["fw-p","p"+e,a.theme])},null,8,["class"]))),64))])),_:2},1032,["style"])))),128))])),_:1})):f("",!0)])),_:1},8,["class"])}}},[["__scopeId","data-v-372dec77"]]);export{P as default};
