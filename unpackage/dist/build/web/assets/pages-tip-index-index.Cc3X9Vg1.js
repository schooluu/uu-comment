import{r as e,c as l,o as a,a as t,w as s,e as n,i as c,b as u,d as i,f as o,n as r,g as d,h as f,t as v,F as _,j as k,k as g,s as m,l as p,S as y,m as h}from"./index-B1YqlGux.js";import{o as w}from"./uni-app.es.B_bhRF7P.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=b({__name:"index",setup(b){const x=e=>{try{return new URL(e).hostname}catch{return e}},C=e([]),j=e("all"),R=l((()=>{if("all"===j.value)return C.value;{const e={};return C.value[j.value]&&(e[j.value]=C.value[j.value]),e}})),S=e(0);e(0);const L=(e,l)=>{j.value=e;const a=g();a.select("#category-"+e).boundingClientRect(),a.select(".category-filter").boundingClientRect(),a.exec((function(e){if(e&&e[0]&&e[1]){const l=e[0],a=e[1],t=l.left+l.width/2-(a.left+a.width/2);S.value+=t}}))},O=e=>{S.value=e.detail.scrollLeft},U=e(1),A=e(30),E=e(!0),F=e(!1);window.addEventListener("message",(e=>{const l=e.data;l&&"openExternalResult"===l.command&&console.log("打开链接结果:",l.success?"成功":"失败")}));const M=async(e=!1)=>{if(F.value)return;F.value=!0;const l=await n.callFunction({name:"getTip",data:{page:U.value,pageSize:A.value}});if(l.result&&l.result.data.length>0){if(e&&Object.keys(C.value).length>0){const e=(a=C.value,Object.keys(a).length>0?Object.values(a).flat():[]);C.value=z([...e,...l.result.data],"type")}else C.value=z(l.result.data,"type");console.log(C.value),E.value=l.result.hasMore,F.value=!1}else E.value=!1,F.value=!1;var a};function z(e,l){return e.reduce(((e,a)=>{const t=a[l];return e[t]||(e[t]=[]),e[t].push(a),e}),{})}const D=()=>{m({title:"正在开发中",icon:"none"})};return a((()=>{M()})),w((()=>{})),(e,l)=>{const a=p,n=c,g=y,m=h;return u(),t(n,{class:"container"},{default:s((()=>[i(n,{class:"header"},{default:s((()=>[i(n,{class:"header-title"},{default:s((()=>[i(a,{class:"title-text"},{default:s((()=>[o("程序员工具箱")])),_:1}),i(a,{class:"title-desc"},{default:s((()=>[o("实用开发工具集合")])),_:1})])),_:1})])),_:1}),i(n,{class:"add-link-box"},{default:s((()=>[i(n,{class:"add-link",onClick:D},{default:s((()=>[o("添加链接")])),_:1})])),_:1}),i(g,{class:"category-filter","scroll-x":"true","show-scrollbar":"false","scroll-left":S.value,"scroll-with-animation":"true",onScroll:O,id:"categoryScroll"},{default:s((()=>[i(n,{class:r(["filter-item",{active:"all"===j.value}]),onClick:l[0]||(l[0]=e=>L("all")),id:"category-all"},{default:s((()=>[o(" 全部 ")])),_:1},8,["class"]),(u(!0),d(_,null,f(C.value,((e,l)=>(u(),t(n,{class:r(["filter-item",{active:j.value===l}]),key:l,id:"category-"+l,onClick:e=>L(l)},{default:s((()=>[o(v(l),1)])),_:2},1032,["class","id","onClick"])))),128))])),_:1},8,["scroll-left"]),(u(!0),d(_,null,f(R.value,((e,l)=>(u(),t(n,{class:"category-section",key:e.key},{default:s((()=>[i(n,{class:"category-header"},{default:s((()=>[i(n,{class:"category-item"},{default:s((()=>[i(a,null,{default:s((()=>[o(v(l),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),i(n,{class:"link-grid"},{default:s((()=>[(u(!0),d(_,null,f(e,(e=>(u(),t(n,{class:"link-item",key:e._id},{default:s((()=>[i(n,{class:"link-content",onClick:l=>{return a=e.linkAddress,void window.parent.postMessage({url:a},"*");var a}},{default:s((()=>[i(m,{src:e.iconUrl?e.iconUrl:"https://ico.mintab.cn/?url="+x(e.linkAddress),class:"link-icon"},null,8,["src"]),i(n,{class:"link-info"},{default:s((()=>[i(a,{class:"link-title"},{default:s((()=>[o(v(e.linkName),1)])),_:2},1024),i(a,{class:"link-desc"},{default:s((()=>[o(v(e.linkDescribe),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128)),F.value?(u(),t(n,{key:0,class:"loading-more"},{default:s((()=>[i(a,null,{default:s((()=>[o("加载中...")])),_:1})])),_:1})):k("",!0)])),_:1})}}},[["__scopeId","data-v-f65a96e9"]]);export{x as default};
