import{r as e,N as a,e as l,w as s,v as t,c as u,f as c,k as d,h as o,t as i,z as r,i as n,j as p,F as f,l as m,G as _,H as v,s as g,ah as h,ao as k,x as b,q as y,W as V,I as x,y as j}from"./index-BG1tn67b.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=w({__name:"checkout",setup(w){const C=e({id:1,logo:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",name:"å¥¶èŒ¶åº—å¤§å­¦åŸåº—",address:"å¤§å­¦åŸç¯è¡—1å·æ¥¼108å·"}),q=e([{id:1,name:"çç å¥¶èŒ¶",price:12,count:2,image:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",description:"çç  + å¥¶èŒ¶",originalPrice:15},{id:2,name:"èŠ‹åœ†å¥¶èŒ¶",price:15,count:1,image:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",description:"èŠ‹åœ† + å¥¶èŒ¶",originalPrice:18},{id:3,name:"æ¤°æœå¥¶èŒ¶",price:13,count:1,image:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",description:"æ¤°æœ + å¥¶èŒ¶"}]),P=e(""),F=e(""),I=e("å¼ ä¸‰"),N=e("13800138000"),U=e("pickup"),T=e(""),z=e(null),A=a((()=>q.value.reduce(((e,a)=>e+a.count),0))),D=a((()=>{var e;return(null==(e=q.value)?void 0:e.length)?q.value.reduce(((e,a)=>e+(Number(a.price)||0)*(Number(a.count)||0)),0):0}));a((()=>{const e=I.value&&N.value&&/^1[3-9]\d{9}$/.test(N.value)&&q.value.length>0;return"pickup"===U.value?e&&P.value:e&&T.value&&z.value}));const G=e=>{P.value=e.detail.value},H=e=>{T.value=e.detail.value},S=()=>{m({url:"/pages/shop/user/address"})},W=async()=>{try{_({title:"æäº¤ä¸­..."}),await new Promise((e=>setTimeout(e,1500))),v(),g({title:"ä¸‹å•æˆåŠŸ",icon:"success"}),h("cartItems"),setTimeout((()=>{k({url:"/pages/shop/store/orderDetail?id=123"})}),1500)}catch(e){v(),g({title:"ä¸‹å•å¤±è´¥",icon:"none"})}};return(e,a)=>{const m=t,_=b,v=y,g=V,h=x,k=j;return u(),l(m,{class:"checkout-page"},{default:s((()=>[c(m,{class:"delivery-type"},{default:s((()=>[c(m,{class:d(["type-item",{active:"pickup"===U.value}]),onClick:a[0]||(a[0]=e=>U.value="pickup")},{default:s((()=>[o(" åˆ°åº—è‡ªå– ")])),_:1},8,["class"]),c(m,{class:d(["type-item",{active:"delivery"===U.value}]),onClick:a[1]||(a[1]=e=>U.value="delivery")},{default:s((()=>[o(" å¤–å–é…é€ ")])),_:1},8,["class"])])),_:1}),c(m,{class:"store-card"},{default:s((()=>[c(m,{class:"store-info"},{default:s((()=>[c(_,{class:"store-logo",src:C.value.logo,mode:"aspectFill"},null,8,["src"]),c(m,{class:"store-detail"},{default:s((()=>[c(v,{class:"store-name"},{default:s((()=>[o(i(C.value.name),1)])),_:1}),c(v,{class:"store-address"},{default:s((()=>[o(i(C.value.address),1)])),_:1})])),_:1})])),_:1}),"pickup"===U.value?(u(),l(m,{key:0,class:"pickup-time"},{default:s((()=>[c(v,{class:"label"},{default:s((()=>[o("è‡ªå–æ—¶é—´")])),_:1}),c(g,{mode:"time",value:P.value,start:"09:00",end:"21:00",onChange:G},{default:s((()=>[c(v,{class:"value"},{default:s((()=>[o(i(P.value||"è¯·é€‰æ‹©å–é¤æ—¶é—´")+" >",1)])),_:1})])),_:1},8,["value"])])),_:1})):r("",!0),"delivery"===U.value?(u(),l(m,{key:1,class:"pickup-time"},{default:s((()=>[c(v,{class:"label"},{default:s((()=>[o("é…é€æ—¶é—´")])),_:1}),c(g,{mode:"time",value:T.value,start:"09:00",end:"21:00",onChange:H},{default:s((()=>[c(v,{class:"value"},{default:s((()=>[o(i(T.value||"è¯·é€‰æ‹©é…é€æ—¶é—´")+" >",1)])),_:1})])),_:1},8,["value"])])),_:1})):r("",!0)])),_:1}),"delivery"===U.value?(u(),l(m,{key:0,class:"address-card"},{default:s((()=>[c(m,{class:"address-info",onClick:S},{default:s((()=>[z.value?(u(),l(m,{key:0},{default:s((()=>[c(m,{class:"user-info"},{default:s((()=>[c(v,{class:"name"},{default:s((()=>[o(i(z.value.name),1)])),_:1}),c(v,{class:"phone"},{default:s((()=>[o(i(z.value.phone),1)])),_:1})])),_:1}),c(m,{class:"address-wrap"},{default:s((()=>[c(v,{class:"location-icon"},{default:s((()=>[o("ğŸ“")])),_:1}),c(v,{class:"address"},{default:s((()=>[o(i(z.value.fullAddress),1)])),_:1})])),_:1})])),_:1})):(u(),l(m,{key:1,class:"no-address"},{default:s((()=>[c(v,{class:"icon"},{default:s((()=>[o("+")])),_:1}),c(v,{class:"text"},{default:s((()=>[o("è¯·é€‰æ‹©æ”¶è´§åœ°å€")])),_:1}),c(v,{class:"arrow"},{default:s((()=>[o(">")])),_:1})])),_:1}))])),_:1})])),_:1})):r("",!0),c(m,{class:"goods-list"},{default:s((()=>[c(m,{class:"list-header"},{default:s((()=>[c(v,{class:"title"},{default:s((()=>[o("è®¢å•è¯¦æƒ…")])),_:1}),c(v,{class:"count"},{default:s((()=>[o("å…±"+i(A.value)+"ä»¶",1)])),_:1})])),_:1}),(u(!0),n(f,null,p(q.value,(e=>(u(),l(m,{class:"goods-item",key:e.id},{default:s((()=>[c(_,{src:e.image,class:"goods-image",mode:"aspectFill"},null,8,["src"]),c(m,{class:"goods-info"},{default:s((()=>[c(v,{class:"goods-name"},{default:s((()=>[o(i(e.name),1)])),_:2},1024),e.description?(u(),l(v,{key:0,class:"goods-desc"},{default:s((()=>[o(i(e.description),1)])),_:2},1024)):r("",!0),c(m,{class:"price-wrap"},{default:s((()=>[c(m,{class:"price-info"},{default:s((()=>[c(v,{class:"price"},{default:s((()=>[o("Â¥"+i(e.price),1)])),_:2},1024),e.originalPrice?(u(),l(v,{key:0,class:"original-price"},{default:s((()=>[o("Â¥"+i(e.originalPrice),1)])),_:2},1024)):r("",!0)])),_:2},1024),c(v,{class:"count"},{default:s((()=>[o("x"+i(e.count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),c(m,{class:"remark-box"},{default:s((()=>[c(v,{class:"label"},{default:s((()=>[o("å¤‡æ³¨")])),_:1}),c(h,{class:"remark-input",modelValue:F.value,"onUpdate:modelValue":a[2]||(a[2]=e=>F.value=e),placeholder:"å¦‚éœ€å¤‡æ³¨è¯·è¾“å…¥","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),c(m,{class:"customer-info"},{default:s((()=>[c(m,{class:"info-item"},{default:s((()=>[c(v,{class:"label"},{default:s((()=>[o("å–é¤äºº")])),_:1}),c(h,{class:"input",modelValue:I.value,"onUpdate:modelValue":a[3]||(a[3]=e=>I.value=e),placeholder:"è¯·è¾“å…¥å–é¤äººå§“å","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1}),c(m,{class:"info-item"},{default:s((()=>[c(v,{class:"label"},{default:s((()=>[o("æ‰‹æœºå·")])),_:1}),c(h,{class:"input",type:"number",maxlength:"11",modelValue:N.value,"onUpdate:modelValue":a[4]||(a[4]=e=>N.value=e),placeholder:"è¯·è¾“å…¥æ‰‹æœºå·","placeholder-class":"placeholder"},null,8,["modelValue"])])),_:1})])),_:1}),c(m,{class:"bottom-bar"},{default:s((()=>[c(m,{class:"price-info"},{default:s((()=>[c(v,{class:"total-label"},{default:s((()=>[o("åˆè®¡")])),_:1}),c(v,{class:"total-price"},{default:s((()=>[o("Â¥"+i(D.value),1)])),_:1})])),_:1}),c(k,{class:"submit-btn",onClick:W},{default:s((()=>[o(" æäº¤è®¢å• ")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-8e42751f"]]);export{C as default};
