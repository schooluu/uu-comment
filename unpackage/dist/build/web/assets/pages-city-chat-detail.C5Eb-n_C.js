import{r as a,O as e,e as s,w as t,x as l,c as u,f as n,h as o,t as r,i as c,j as i,k as d,A as m,F as f,v,y as p,S as _,I as g,z as h}from"./index-DUqm4Qcg.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=j({__name:"detail",setup(j){const x="张三",y=a([{id:1,content:"你好，请问这个商品还在吗？",time:"2024-01-20 10:30:00",isSelf:!1,avatar:"https://example.com/avatar1.jpg"},{id:2,content:"在的，您想了解什么？",time:"2024-01-20 10:31:00",isSelf:!0,avatar:"https://example.com/avatar2.jpg"}]),b=a(""),S=e((()=>{const a=y.value[y.value.length-1];return a?"msg-"+a.id:""})),k=a=>{if(0===a)return!0;const e=y.value[a],s=y.value[a-1];return dayjs(e.time).diff(dayjs(s.time),"minute")>5},D=()=>{b.value.trim()&&(y.value.push({id:y.value.length+1,content:b.value,time:dayjs().format("YYYY-MM-DD HH:mm:ss"),isSelf:!0,avatar:"https://example.com/avatar2.jpg"}),b.value="")},H=()=>{console.log("加载更多消息")};return(a,e)=>{const j=v,M=l,Y=p,w=_,V=g,C=h;return u(),s(M,{class:"chat-container"},{default:t((()=>[n(M,{class:"header"},{default:t((()=>[n(j,{class:"title"},{default:t((()=>[o(r(x),1)])),_:1})])),_:1}),n(w,{class:"message-list","scroll-y":"","scroll-into-view":S.value,onScrolltoupper:H},{default:t((()=>[(u(!0),c(f,null,i(y.value,((a,e)=>(u(),s(M,{key:e,id:"msg-"+a.id,class:d(["message-item",a.isSelf?"self":"other"])},{default:t((()=>[n(Y,{class:"avatar",src:a.avatar},null,8,["src"]),n(M,{class:"message-content"},{default:t((()=>[k(e)?(u(),s(j,{key:0,class:"time"},{default:t((()=>{return[o(r((e=a.time,dayjs(e).format("MM-DD HH:mm"))),1)];var e})),_:2},1024)):m("",!0),n(M,{class:"bubble"},{default:t((()=>[n(j,null,{default:t((()=>[o(r(a.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["id","class"])))),128))])),_:1},8,["scroll-into-view"]),n(M,{class:"input-area"},{default:t((()=>[n(M,{class:"input-box"},{default:t((()=>[n(V,{type:"text",modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),placeholder:"请输入消息",onConfirm:D},null,8,["modelValue"])])),_:1}),n(M,{class:"tools"},{default:t((()=>[n(j,{class:"emoji-btn"},{default:t((()=>[o("😊")])),_:1}),n(j,{class:"image-btn"},{default:t((()=>[o("🖼️")])),_:1})])),_:1}),n(C,{class:d(["send-btn",{active:b.value}]),onClick:D},{default:t((()=>[o(" 发送 ")])),_:1},8,["class"])])),_:1})])),_:1})}}},[["__scopeId","data-v-fe2774d2"]]);export{x as default};
