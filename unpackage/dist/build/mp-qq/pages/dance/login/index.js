"use strict";const e=require("../../../common/vendor.js"),a={__name:"index",setup(a){const t=e.ref(""),l=e.ref(""),n=e.ref(!1),o=e.ref(60);let u=null;const s=async()=>{if(i.value)try{v();const a=await e.index.request({url:"YOUR_API_URL/sendCode",method:"POST",data:{phone:t.value}});if(200!==a.data.code)throw new Error(a.data.message||"发送失败");e.index.showToast({title:"验证码已发送",icon:"success"})}catch(a){c(),e.index.showToast({title:a.message||"发送验证码失败，请重试",icon:"none"})}else e.index.showToast({title:"请输入正确的手机号",icon:"none"})},v=()=>{n.value=!0,o.value=60,u=setInterval((()=>{o.value--,o.value<=0&&c()}),1e3)},c=()=>{u&&(clearInterval(u),u=null),n.value=!1,o.value=60},i=e.computed((()=>t.value&&/^1[3-9]\d{9}$/.test(t.value))),d=e.computed((()=>i.value&&6===l.value.length));e.onUnmounted((()=>{c()}));const r=()=>{t.value&&11===t.value.length?l.value&&6===l.value.length||e.index.showToast({title:"请输入正确的验证码",icon:"none"}):e.index.showToast({title:"请输入正确的手机号",icon:"none"})};return(a,u)=>({a:t.value,b:e.o((e=>t.value=e.detail.value)),c:l.value,d:e.o((e=>l.value=e.detail.value)),e:e.t(n.value?`${o.value}s后重试`:"获取验证码"),f:n.value?1:"",g:e.o(s),h:e.o(r),i:!d.value})}},t=e._export_sfc(a,[["__scopeId","data-v-352b231a"]]);qq.createPage(t);
