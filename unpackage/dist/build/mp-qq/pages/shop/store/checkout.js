"use strict";const e=require("../../../common/vendor.js"),i={__name:"checkout",setup(i){const a=e.ref({id:1,logo:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",name:"奶茶店大学城店",address:"大学城环街1号楼108号"}),u=e.ref([{id:1,name:"珍珠奶茶",price:12,count:2,image:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",description:"珍珠 + 奶茶",originalPrice:15},{id:2,name:"芋圆奶茶",price:15,count:1,image:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",description:"芋圆 + 奶茶",originalPrice:18},{id:3,name:"椰果奶茶",price:13,count:1,image:"https://img-shop.qmimg.cn/s23107/2020/04/26/3eb7808bf105262604.jpg",description:"椰果 + 奶茶"}]),l=e.ref(""),t=e.ref(""),o=e.ref("张三"),r=e.ref("13800138000"),n=e.ref("pickup"),v=e.ref(""),c=e.ref(null),d=e.computed((()=>u.value.reduce(((e,i)=>e+i.count),0))),s=e.computed((()=>{var e;return(null==(e=u.value)?void 0:e.length)?u.value.reduce(((e,i)=>e+(Number(i.price)||0)*(Number(i.count)||0)),0):0}));e.computed((()=>{const e=o.value&&r.value&&/^1[3-9]\d{9}$/.test(r.value)&&u.value.length>0;return"pickup"===n.value?e&&l.value:e&&v.value&&c.value}));const p=e=>{l.value=e.detail.value},m=e=>{v.value=e.detail.value},g=()=>{e.index.navigateTo({url:"/pages/shop/user/address"})},h=async()=>{try{e.index.showLoading({title:"提交中..."}),await new Promise((e=>setTimeout(e,1500))),e.index.hideLoading(),e.index.showToast({title:"下单成功",icon:"success"}),e.index.removeStorageSync("cartItems"),setTimeout((()=>{e.index.redirectTo({url:"/pages/shop/store/orderDetail?id=123"})}),1500)}catch(i){e.index.hideLoading(),e.index.showToast({title:"下单失败",icon:"none"})}};return(i,f)=>e.e({a:"pickup"===n.value?1:"",b:e.o((e=>n.value="pickup")),c:"delivery"===n.value?1:"",d:e.o((e=>n.value="delivery")),e:a.value.logo,f:e.t(a.value.name),g:e.t(a.value.address),h:"pickup"===n.value},"pickup"===n.value?{i:e.t(l.value||"请选择取餐时间"),j:l.value,k:e.o(p)}:{},{l:"delivery"===n.value},"delivery"===n.value?{m:e.t(v.value||"请选择配送时间"),n:v.value,o:e.o(m)}:{},{p:"delivery"===n.value},"delivery"===n.value?e.e({q:c.value},c.value?{r:e.t(c.value.name),s:e.t(c.value.phone),t:e.t(c.value.fullAddress)}:{},{v:e.o(g)}):{},{w:e.t(d.value),x:e.f(u.value,((i,a,u)=>e.e({a:i.image,b:e.t(i.name),c:i.description},i.description?{d:e.t(i.description)}:{},{e:e.t(i.price),f:i.originalPrice},i.originalPrice?{g:e.t(i.originalPrice)}:{},{h:e.t(i.count),i:i.id}))),y:t.value,z:e.o((e=>t.value=e.detail.value)),A:o.value,B:e.o((e=>o.value=e.detail.value)),C:r.value,D:e.o((e=>r.value=e.detail.value)),E:e.t(s.value),F:e.o(h)})}};qq.createPage(i);
